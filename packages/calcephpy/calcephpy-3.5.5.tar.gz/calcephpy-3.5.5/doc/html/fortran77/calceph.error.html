<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Error functions &mdash; CALCEPH  - Fortran 77/90/95 language 3.5.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Miscellaneous functions" href="calceph.misc.html" />
    <link rel="prev" title="Single file access functions" href="condsingle/calceph.single.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CALCEPH  - Fortran 77/90/95 language
          </a>
              <div class="version">
                3.5.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="calceph.intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="calceph.install.cusage.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="calceph.interface.html">Library interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="calceph.multiple.html">Multiple file access functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="condsingle/calceph.single.html">Single file access functions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Error functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#menu-calceph-seterrorhandler">f90calceph_seterrorhandler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#calcephpy.seterrorhandler"><code class="docutils literal notranslate"><span class="pre">calcephpy.seterrorhandler()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="calceph.misc.html">Miscellaneous functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="calceph.naifid.html">NAIF identification numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="calceph.final.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="calceph.reportbugs.html">Reporting bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="calceph.copying.html">CALCEPH Library Copying conditions</a></li>
</ul>

    <a href="genindex.html">Index</a>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CALCEPH  - Fortran 77/90/95 language</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Error functions</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="error-functions">
<h1>Error functions<a class="headerlink" href="#error-functions" title="Permalink to this heading"></a></h1>
<p>The following group of functions defines the behavior of the library when errors occur during the execution.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>The following examples, that can be found in the directory <em>examples</em> of the library sources, show the typical usage of this group of functions.</p>
<p>The example in Fortran 77/90/95 language is <code class="file docutils literal notranslate"><span class="pre">f77error.f</span></code>.</p>
<p>The following example shows how to stop the execution on the error.</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">program </span><span class="n">f77error</span>
<span class="w">    </span><span class="k">implicit none</span>
<span class="k">    include</span><span class="w"> </span><span class="s1">&#39;f90calceph.h&#39;</span>
<span class="w">    </span><span class="kt">integer</span><span class="o">*</span><span class="mi">8</span><span class="w"> </span><span class="n">peph</span>
<span class="w">    </span><span class="kt">integer </span><span class="n">res</span>

<span class="w">    </span><span class="c">! set the  error handler to stop on error</span>
<span class="w">     </span><span class="k">call </span><span class="n">f90calceph_seterrorhandler</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>

<span class="w">    </span><span class="c">! open the ephemeris file</span>
<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f90calceph_open</span><span class="p">(</span><span class="n">peph</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;example1.dat&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c">! ...</span>
<span class="k">stop</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The following example shows how to define a custom error handler function.</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="c">!-----------------------------------------------------------------</span>
<span class="w"> </span><span class="c">! custom error handler</span>
<span class="w"> </span><span class="c">!-----------------------------------------------------------------</span>
<span class="w">         </span><span class="k">subroutine </span><span class="n">myhandler</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="w">            </span><span class="k">implicit none</span>
<span class="k">            </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">msg</span>
<span class="w">            </span><span class="k">write</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s2">&quot;The calceph calls the function myhandler&quot;</span>
<span class="w">            </span><span class="k">write</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s2">&quot;The message contains &quot;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">msg</span><span class="p">),</span><span class="s2">&quot; characters&quot;</span>
<span class="w">            </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s2">&quot;The error message is :&quot;</span>
<span class="w">            </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s2">&quot;----------------------&quot;</span>
<span class="w">            </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">msg</span>
<span class="w">            </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s2">&quot;----------------------&quot;</span>
<span class="w">            </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s2">&quot;The error handler returns&quot;</span>
<span class="w">         </span><span class="k">end</span>

<span class="w"> </span><span class="c">!-----------------------------------------------------------------</span>
<span class="w"> </span><span class="c">! main program</span>
<span class="w"> </span><span class="c">!-----------------------------------------------------------------</span>
<span class="w"> </span><span class="k">program </span><span class="n">f77error</span>
<span class="w">    </span><span class="k">implicit none</span>
<span class="k">    include</span><span class="w"> </span><span class="s1">&#39;f90calceph.h&#39;</span>
<span class="w">    </span><span class="kt">integer </span><span class="n">res</span>
<span class="w">    </span><span class="kt">integer</span><span class="o">*</span><span class="mi">8</span><span class="w"> </span><span class="n">peph</span>
<span class="w">    </span><span class="k">external </span><span class="n">myhandler</span>


<span class="w">     </span><span class="c">! set the  error handler to use my own callback</span>
<span class="w">     </span><span class="k">call </span><span class="n">f90calceph_seterrorhandler</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">myhandler</span><span class="p">)</span>

<span class="w">    </span><span class="c">! open the ephemeris file</span>
<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f90calceph_open</span><span class="p">(</span><span class="n">peph</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;example1.dat&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c">! ...</span>
<span class="k">stop</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="menu-calceph-seterrorhandler">
<h2>f90calceph_seterrorhandler<a class="headerlink" href="#menu-calceph-seterrorhandler" title="Permalink to this heading"></a></h2>
<dl>
<dt class="sig sig-object f" id="f/_/f90calceph_seterrorhandler">
<em class="property"><span class="pre">subroutine</span>&#160; </em><span class="sig-name descname"><span class="pre">f90calceph_seterrorhandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">typehandler</span></em>, <em class="sig-param"><span class="pre">userfunc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#f/_/f90calceph_seterrorhandler" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>typehandler</strong><em> [</em><em>INTEGER, intent(in)</em><em>]</em> :: type of handler</p></li>
<li><p><strong>userfunc</strong><em> [</em><em>EXTERNAL, intent(in)</em><em>]</em> :: user function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>This function defines the behavior of the library when an error occurs during the execution of the library's functions. This function should be (not mandatory) called before any other functions of the library. The behavior depends on the value of <em>typehandler</em>.</p>
<p>The possible values for <em>typehandler</em> are  :</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>value</p></th>
<th class="head"><p>meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><div class="line-block">
<div class="line">The library displays a message and continues the execution.</div>
<div class="line">The functions return an error code. The python and Octave/Matlab interfaces raise</div>
<div class="line">an exception.</div>
<div class="line">This is the default behavior of the library.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><div class="line-block">
<div class="line">The library displays a message</div>
<div class="line">and terminates the execution with a system call to the function <em>exit</em>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><div class="line-block">
<div class="line">The library calls the user function <em>userfunc</em> with the message.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>If the function is called with 1 or 2 for <em>typehandler</em>, the parameter <em>userfunc</em> is ignored and it may be an empty function.</p>
<p>The function <em>userfunc</em> must be defined as</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">subroutine </span><span class="n">userfunc</span><span class="w"> </span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="k">implicit none</span>
<span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">msg</span>
</pre></div>
</div>
<p>This function must be declared as <strong>EXTERNAL</strong></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="condsingle/calceph.single.html" class="btn btn-neutral float-left" title="Single file access functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="calceph.misc.html" class="btn btn-neutral float-right" title="Miscellaneous functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, CNRS, Observatoire de Paris, Observatoire de la Côte d&#39;Azur.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>