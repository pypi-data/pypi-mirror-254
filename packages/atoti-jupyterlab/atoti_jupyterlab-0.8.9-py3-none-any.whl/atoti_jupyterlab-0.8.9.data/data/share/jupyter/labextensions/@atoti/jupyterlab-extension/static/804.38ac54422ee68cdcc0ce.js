/*! For license information please see 804.38ac54422ee68cdcc0ce.js.LICENSE.txt */
"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[804,3388,4881,7076,7458,7003],{37003:(e,r,t)=>{t.r(r),t.d(r,{canOpenDrillthroughOnSelection:()=>b,getDrillthroughWidgetFilters:()=>S,pluginMenuItemOpenDrillthrough:()=>N});var n=t(93388),l=t(77026),o=t(66029),a=t(93481),i=t(52258),s=t(87187),u=t(58521),m=t(20106),c=t(72626),d=t(35231),h=t(59017),f=t(85365),g=t(43543),p=t(13743),y=t(33145);function b(e){return void 0!==e&&!(e.axes&&e.axes.length>0)&&void 0!==e.cells&&1===e.cells.length&&void 0!==e.cells[0].value}var _=t(24960),x=t(49304),C=t(40472);function v(e,r){const{dimensionName:t,hierarchyName:n}=e;return r.some((e=>(0,C.I)(e,{dimensionName:t,hierarchyName:n})))}function S({sourceWidgetFilters:e,tuple:r,cube:t}){return[...(e||[]).filter((e=>!v(e,r))),...r.map((({dimensionName:e,hierarchyName:r,namePath:t})=>({type:"members",dimensionName:e,hierarchyName:r,members:[t]})))]}const N={key:"open-drillthrough",useMenuItem:e=>{const{selection:r,widgetState:t}=e,{cube:C,serverKey:N}=(0,y.useCube)(t),{formatMessage:O}=(0,a.useIntl)(),D=(0,c.T)(),k=(0,o.useMemo)((()=>{if(b(r))return r.cells[0].tuple.filter((e=>"Measures"===e.dimensionName||!(0,s.isTotal)((0,f._)(e,C),e)))}),[C,r]),F=(0,o.useMemo)((()=>{if(k){const e=k.filter((e=>"Measures"!==e.dimensionName));return O({id:"aui.plugins.menu-item.open-drillthrough.openDrillthrough"},{member:e.length>0?(0,s.getTupleCaption)(e,{captionForTotals:O({id:"aui.total"}),cube:C,separator:", ",hasOnlyCaptionForLeafLevels:!0}):void 0})}}),[O,k,C]),[w]=(0,u.y)("drillthrough.defaultSelectedColumns"),[j]=(0,m.o)(N,C.name),M=(0,o.useMemo)((()=>{const e=(0,p.K)(j??[]);return(0,l.flatten)(["numeric","regular","date"].map((r=>e[r]??[])))}),[j]),W=(0,o.useCallback)((async()=>{if(D&&F&&k&&(0,i.F)(e)){const r=(0,d.A)(e.dashboardState.pagesOrder),n=e.dashboardState.pagesOrder.indexOf(D),o=e.dashboardState.pages[D];if(void 0===t.query.mdx)return;const a=function({name:e,sourceWidget:r,sourceWidgetPage:t,tuple:n,drillthroughColumns:o,defaultSelectedColumns:a,cube:i}){const s=S({sourceWidgetFilters:r.filters,tuple:n,cube:i}),u=(0,l.map)(o,"name"),m=a[i.name]?(0,l.intersection)(u,a[i.name]):u,c={mdx:(0,_.r)((0,y.getDefaultMdxDrillthrough)(i.name),{drillthroughColumnUniqueNames:m})};r.query.mdx&&r.query.mdx.withClause&&(c.mdx.select.withClause=r.query.mdx.withClause);const d=(t.filters||[]).filter((e=>!v(e,n)));return{name:e,content:{0:{...x.o.initialState,query:c,serverKey:r.serverKey,initialCubeName:i.name,filters:s}},layout:{direction:"column",children:[{leafKey:"0",size:1}]},filters:d}}({name:F,sourceWidget:t,sourceWidgetPage:o,tuple:k,drillthroughColumns:M,defaultSelectedColumns:w,cube:C}),i=(0,h.W)(e.dashboardState,{page:a,key:r,index:n+1});e.onDashboardChange(i),e.onActivePageChange(r)}}),[D,C,F,e,k,t,w,M]);if((0,i.F)(e)&&k&&t.query.mdx)return{icon:(0,n.tZ)(g.IconDrillthrough,{}),label:F,onClick:W}},translations:{"en-US":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {on {member}}\n          }"},"fr-FR":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {sur {member}}\n          }"}}}},93388:(e,r,t)=>{t.d(r,{BX:()=>i,HY:()=>o,tZ:()=>a});var n=t(97458),l=t(38530),o=(t(66029),t(21759),t(10063),t(93232),t(78070),n.Fragment);function a(e,r,t){return l.h.call(r,"css")?n.jsx(l.E,(0,l.c)(e,r),t):n.jsx(e,r,t)}function i(e,r,t){return l.h.call(r,"css")?n.jsxs(l.E,(0,l.c)(e,r),t):n.jsxs(e,r,t)}},56053:(e,r,t)=>{var n=t(66029),l=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var n,o={},u=null,m=null;for(n in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(m=r.ref),r)a.call(r,n)&&!s.hasOwnProperty(n)&&(o[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===o[n]&&(o[n]=r[n]);return{$$typeof:l,type:e,key:u,ref:m,props:o,_owner:i.current}}r.Fragment=o,r.jsx=u,r.jsxs=u},97458:(e,r,t)=>{e.exports=t(56053)}}]);