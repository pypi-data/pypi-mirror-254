(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{51471:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(90849),s=r(34896),i=r(88038),o=r.n(i),a=r(86677),c=(r(27378),r(90768)),u=r(51365),l=r(29549),d=r(60709),p=r(24246),f=function(){var e=(0,a.useRouter)();return(0,p.jsx)(s.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,p.jsxs)(s.xu,{children:[(0,p.jsxs)(s.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,p.jsx)(s.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,p.jsx)(l.zx,{size:"sm",variant:"outline",onClick:function(){e.push(d.fz)},children:"Configure"})]}),(0,p.jsxs)(s.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){var t=e.children,r=e.title,n=e.mainProps,i=(0,c.hz)(),l=(0,a.useRouter)(),d="/privacy-requests"===l.pathname||"/datastore-connection"===l.pathname,h=!(i.flags.privacyRequestsConfiguration&&d),v=(0,u.JE)(void 0,{skip:h}).data,j=(0,u.PW)(void 0,{skip:h}).data,x=i.flags.privacyRequestsConfiguration&&(!v||!j)&&d;return(0,p.jsxs)(s.kC,{"data-testid":r,direction:"column",height:"calc(100vh - 48px)",children:[(0,p.jsxs)(o(),{children:[(0,p.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,p.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,p.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,p.jsxs)(s.kC,m(m({as:"main",direction:"column",py:6,px:10,flex:1,minWidth:0,overflow:"auto"},n),{},{children:[x?(0,p.jsx)(f,{}):null,t]}))]})}},9408:function(e,t,r){"use strict";r.d(t,{HK:function(){return i},VY:function(){return n.V}});var n=r(36653),s=r(78624),i=function(){var e=(0,n.V)().errorAlert;return{handleError:function(t){var r="An unexpected error occurred. Please try again.";(0,s.Ot)(t)?r=t.data.detail:(0,s.tB)(t)&&(r=t.data.detail[0].msg),e(r)}}};r(27378)},36653:function(e,t,r){"use strict";r.d(t,{V:function(){return d}});var n=r(90849),s=r(70409),i=r(23286),o=r(34896),a=r(93235),c=r(24246);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){var e=(0,s.pm)();return{errorAlert:function(t,r,n){var s=l(l({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"error",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(o.xu,{children:[r&&(0,c.jsx)(i.Cd,{children:r}),(0,c.jsx)(i.X,{children:t})]}),(0,c.jsx)(a.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)},successAlert:function(t,r,n){var s=l(l({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(o.xu,{children:[r&&(0,c.jsx)(i.Cd,{children:r}),(0,c.jsx)(i.X,{children:t})]}),(0,c.jsx)(a.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)}}}},56069:function(e,t,r){"use strict";var n=r(90849),s=r(90089),i=r(34896),o=r(29549),a=r(73452),c=r(79894),u=r.n(c),l=r(24246),d=["backPath"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.backPath,r=(0,s.Z)(e,d);return(0,l.jsxs)(i.kC,f(f({alignItems:"center",mt:-4,mb:3},r),{},{children:[(0,l.jsx)(u(),{href:t,passHref:!0,children:(0,l.jsx)(o.hU,{"aria-label":"Back",icon:(0,l.jsx)(a.Rp,{}),mr:2,size:"xs",variant:"outline"})}),(0,l.jsx)(u(),{href:t,passHref:!0,children:(0,l.jsx)(i.xv,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},24330:function(e,t,r){"use strict";r.d(t,{DE:function(){return i},MP:function(){return n},qX:function(){return s}});var n=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]),s={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},i={local:"local",s3:"s3"}},70810:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(55732),s=r(97865),i=r(34707),o=r.n(i),a=r(9198),c=r(34896),u=r(73772),l=r(27378),d=r(78624),p=r(9408),f=r(51471),h=r(56069),m=r(24330),v=r(51365),j=r(29549),x=r(34090),b=r(43139),g=r(24246),y=function(e){var t,r,i,a,u,f=e.storageDetails,h=(0,l.useState)(""),y=h[0],_=h[1],w=(0,v.gC)(),O=(0,s.Z)(w,1)[0],k=(0,v.cf)(),P=(0,s.Z)(k,1)[0],S=(0,p.HK)().handleError,C=(0,p.VY)().successAlert,D={type:m.DE.s3,auth_method:null!==(t=null===f||void 0===f||null===(r=f.details)||void 0===r?void 0:r.auth_method)&&void 0!==t?t:"",bucket:null!==(i=null===f||void 0===f||null===(a=f.details)||void 0===a?void 0:a.bucket)&&void 0!==i?i:"",format:null!==(u=null===f||void 0===f?void 0:f.format)&&void 0!==u?u:""},z=function(){var e=(0,n.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({type:m.DE.s3,details:{auth_method:t.auth_method,bucket:t.bucket},format:t.format});case 2:r=e.sent,(0,d.D4)(r)?S(r.error):(_(t.auth_method),C("S3 storage credentials successfully updated."));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,n.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({details:{aws_access_key_id:t.aws_access_key_id,aws_secret_access_key:t.aws_secret_access_key},type:m.DE.s3});case 2:r=e.sent,(0,d.D4)(r)?S(r.error):C("S3 storage secrets successfully updated.");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.X6,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,g.jsx)(c.Kq,{children:(0,g.jsx)(x.J9,{initialValues:D,onSubmit:z,enableReinitialize:!0,children:function(e){var t=e.isSubmitting,r=e.handleReset;return(0,g.jsxs)(x.l0,{children:[(0,g.jsxs)(c.Kq,{mt:5,spacing:5,children:[(0,g.jsx)(b.AP,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,g.jsx)(b.AP,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,g.jsx)(b.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,g.jsx)(j.zx,{onClick:function(){return r()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,g.jsx)(j.zx,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===y?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.iz,{mt:5}),(0,g.jsx)(c.X6,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,g.jsx)(c.Kq,{children:(0,g.jsx)(x.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:E,children:function(e){var t=e.isSubmitting,r=e.handleReset;return(0,g.jsxs)(x.l0,{children:[(0,g.jsxs)(c.Kq,{mt:5,spacing:5,children:[(0,g.jsx)(b.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,g.jsx)(b.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,g.jsxs)(c.xu,{mt:10,children:[(0,g.jsx)(j.zx,{onClick:function(){return r()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,g.jsx)(j.zx,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},_=function(){var e=(0,p.VY)().successAlert,t=(0,p.HK)().handleError,r=(0,l.useState)(""),i=r[0],j=r[1],x=(0,v.PW)().data,b=(0,v.Au)({type:i}).data,_=(0,v.gC)(),w=(0,s.Z)(_,2),O=w[0],k=w[1].isLoading,P=(0,v.L)(),S=(0,s.Z)(P,1)[0];(0,l.useEffect)((function(){x&&j(x.type)}),[x]);var C=function(){var r=(0,n.Z)(o().mark((function r(n){var s,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n!==m.DE.local){r.next=5;break}return r.next=3,O({type:n,details:{},format:"json"});case 3:s=r.sent,(0,d.D4)(s)?t(s.error):e("Configured storage details successfully.");case 5:return r.next=7,S({storage:{active_default_storage_type:n}});case 7:i=r.sent,(0,d.D4)(i)?t(i.error):j(n);case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,g.jsxs)(f.Z,{title:"Configure Privacy Requests - Storage",children:[(0,g.jsx)(h.Z,{backPath:a.fz}),(0,g.jsx)(c.X6,{mb:5,fontSize:"2xl",fontWeight:"semibold",children:"Configure storage"}),(0,g.jsxs)(c.xu,{display:"flex",flexDirection:"column",width:"50%",children:[(0,g.jsx)(c.xu,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,g.jsxs)(c.xu,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,g.jsx)(c.xv,{as:"span",color:"complimentary.500",children:"Local"})," ","and"," ",(0,g.jsx)(c.xv,{as:"span",color:"complimentary.500",children:"S3"})," ","storage methods."]}),(0,g.jsx)(c.X6,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,g.jsx)(u.Ee,{isDisabled:k,onChange:C,value:i,"data-testid":"privacy-requests-storage-selection",colorScheme:"secondary",p:3,children:(0,g.jsxs)(c.Kq,{direction:"row",children:[(0,g.jsx)(u.Y8,{value:"local","data-testid":"option-local",mr:5,children:"Local"},"local"),(0,g.jsx)(u.Y8,{value:"s3","data-testid":"option-s3",children:"S3"},"s3")]})}),"s3"===i&&b?(0,g.jsx)(y,{storageDetails:b}):null]})]})},w=function(){return(0,g.jsx)(_,{})}},23663:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return r(70810)}])}},function(e){e.O(0,[7751,6432,530,3452,3453,9198,6557,9774,2888,179],(function(){return t=23663,e(e.s=t);var t}));var t=e.O();_N_E=t}]);