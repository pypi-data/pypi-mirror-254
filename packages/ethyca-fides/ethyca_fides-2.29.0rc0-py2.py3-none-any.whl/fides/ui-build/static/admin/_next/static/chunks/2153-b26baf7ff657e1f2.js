"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2153],{64860:function(e,r,n){var t=n(30794),i=(n(27378),n(74011)),o=n(24246);r.Z=function(e){var r=e.daysLeft,n=e.includeText,s=e.status;if(!r||s===i.q.COMPLETE||s===i.q.CANCELED||s===i.q.DENIED||s===i.q.IDENTITY_UNVERIFIED)return null;var c="";switch(!0){case r>=10:c="green.500";break;case r<10&&r>4:c="orange.500";break;case r<5:c="red.400"}var a=n?"".concat(r," days left"):r;return(0,o.jsx)(t.Vp,{backgroundColor:c,color:"white",fontWeight:"medium",fontSize:"sm",children:a})}},51471:function(e,r,n){n.d(r,{Z:function(){return g}});var t=n(90849),i=n(34896),o=n(88038),s=n.n(o),c=n(86677),a=(n(27378),n(90768)),u=n(51365),l=n(29549),d=n(60709),p=n(24246),f=function(){var e=(0,c.useRouter)();return(0,p.jsx)(i.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,p.jsxs)(i.xu,{children:[(0,p.jsxs)(i.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,p.jsx)(i.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,p.jsx)(l.zx,{size:"sm",variant:"outline",onClick:function(){e.push(d.fz)},children:"Configure"})]}),(0,p.jsxs)(i.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function h(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function b(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?h(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var g=function(e){var r=e.children,n=e.title,t=e.mainProps,o=(0,a.hz)(),l=(0,c.useRouter)(),d="/privacy-requests"===l.pathname||"/datastore-connection"===l.pathname,h=!(o.flags.privacyRequestsConfiguration&&d),g=(0,u.JE)(void 0,{skip:h}).data,v=(0,u.PW)(void 0,{skip:h}).data,j=o.flags.privacyRequestsConfiguration&&(!g||!v)&&d;return(0,p.jsxs)(i.kC,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",children:[(0,p.jsxs)(s(),{children:[(0,p.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,p.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,p.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,p.jsxs)(i.kC,b(b({as:"main",direction:"column",py:6,px:10,flex:1,minWidth:0,overflow:"auto"},t),{},{children:[j?(0,p.jsx)(f,{}):null,r]}))]})}},13807:function(e,r,n){var t=n(24246);r.Z=function(e){var r=e.data,n=e.revealPII?r:r.replace(/./g,"*");return(0,t.jsx)(t.Fragment,{children:n})}},95946:function(e,r,n){var t=n(62709),i=(n(27378),n(24246));r.Z=function(e){var r=e.revealPII,n=e.onChange;return(0,i.jsx)(t.r,{colorScheme:"secondary",isChecked:r,onChange:function(e){return n(e.target.checked)}})}},19099:function(e,r,n){var t=n(34896),i=n(24246),o={approved:{bg:"yellow.500",label:"Approved"},complete:{bg:"green.500",label:"Completed"},awaiting_email_send:{bg:"gray.400",label:"Awaiting Email Send"},denied:{bg:"red.500",label:"Denied"},canceled:{bg:"red.600",label:"Canceled"},error:{bg:"red.800",label:"Error"},in_processing:{bg:"orange.500",label:"In Progress"},paused:{bg:"gray.400",label:"Paused"},pending:{bg:"blue.400",label:"New"},identity_unverified:{bg:"red.400",label:"Unverified"},requires_input:{bg:"yellow.400",label:"Requires Input"}};r.Z=function(e){var r=e.status;return(0,i.jsx)(t.Ct,{color:"white",bg:o[r].bg,width:"100%",minWidth:"120px",lineHeight:"18px",textAlign:"center","data-testid":"request-status-badge",children:o[r].label})}},1540:function(e,r,n){n.d(r,{E:function(){return a}});var t=n(30794),i=n(34896),o=n(9481),s=(n(27378),n(1326)),c=n(24246),a=function(e){return Array.from(new Set(e.filter((function(e){return Object.values(o.U).includes(e.action_type)})).map((function(e){return e.action_type}))))};r.Z=function(e){var r=e.rules,n=a(r).map((function(e){return(0,s.kC)(e)})).map((function(e){return(0,c.jsx)(t.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:e},e)}));return(0,c.jsx)(i.xu,{children:n})}},9408:function(e,r,n){n.d(r,{HK:function(){return o},VY:function(){return t.V}});var t=n(36653),i=n(78624),o=function(){var e=(0,t.V)().errorAlert;return{handleError:function(r){var n="An unexpected error occurred. Please try again.";(0,i.Ot)(r)?n=r.data.detail:(0,i.tB)(r)&&(n=r.data.detail[0].msg),e(n)}}};n(27378)},36653:function(e,r,n){n.d(r,{V:function(){return d}});var t=n(90849),i=n(70409),o=n(23286),s=n(34896),c=n(93235),a=n(24246);function u(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(r,n,t){var i=l(l({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,a.jsxs)(o.bZ,{alignItems:"normal",status:"error",children:[(0,a.jsx)(o.zM,{}),(0,a.jsxs)(s.xu,{children:[n&&(0,a.jsx)(o.Cd,{children:n}),(0,a.jsx)(o.X,{children:r})]}),(0,a.jsx)(c.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)},successAlert:function(r,n,t){var i=l(l({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,a.jsxs)(o.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,a.jsx)(o.zM,{}),(0,a.jsxs)(s.xu,{children:[n&&(0,a.jsx)(o.Cd,{children:n}),(0,a.jsx)(o.X,{children:r})]}),(0,a.jsx)(c.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)}}}},40377:function(e,r,n){n.d(r,{Z:function(){return v}});var t=n(90849),i=n(32393),o=n(21084),s=n(97865),c=n(60530),a=n(34896),u=n(29549),l=n(27378),d=n(24246),p=function(e){var r=e.isOpen,n=e.onClose,t=e.onApproveRequest,i=e.isLoading,o=e.subjectRequest,p=o.identity,f=o.identity_verified_at,h=o.custom_privacy_request_fields,b=(0,l.useCallback)((function(){t().then((function(){n()}))}),[t,n]);return(0,d.jsxs)(c.u_,{isOpen:r,onClose:n,size:"lg",isCentered:!0,children:[(0,d.jsx)(c.ZA,{}),(0,d.jsxs)(c.hz,{children:[(0,d.jsx)(c.xB,{children:"Privacy request approval"}),(0,d.jsxs)(c.fe,{paddingTop:0,paddingBottom:0,children:[(0,d.jsx)(a.xv,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,d.jsxs)(a.QI,{children:[p.email&&(0,d.jsx)(a.HC,{children:(0,d.jsxs)(a.kC,{alignItems:"flex-start",children:[(0,d.jsx)(a.xv,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Email:"}),(0,d.jsxs)(a.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:[p.email," (",f?"Verified":"Unverified",")"]})]})}),p.phone_number&&(0,d.jsx)(a.HC,{children:(0,d.jsxs)(a.kC,{alignItems:"flex-start",children:[(0,d.jsx)(a.xv,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Phone Number:"}),(0,d.jsxs)(a.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:[p.phone_number," (",f?"Verified":"Unverified",")"]})]})}),h&&Object.entries(h).filter((function(e){return(0,s.Z)(e,2)[1].value})).map((function(e){var r=(0,s.Z)(e,2),n=r[0],t=r[1];return(0,d.jsx)(a.HC,{children:(0,d.jsxs)(a.kC,{alignItems:"flex-start",children:[(0,d.jsxs)(a.xv,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[t.label,":"]}),(0,d.jsxs)(a.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:[t.value," (Unverified)"]})]},n)},n)}))]})]}),(0,d.jsx)(c.mz,{children:(0,d.jsxs)(a.MI,{columns:2,width:"100%",children:[(0,d.jsx)(u.zx,{variant:"outline",size:"sm",mr:3,"data-testid":"cancel-btn",onClick:n,children:"Cancel"}),(0,d.jsx)(u.zx,{colorScheme:"primary",variant:"solid",size:"sm","data-testid":"continue-btn",onClick:b,isLoading:i,children:"Confirm"})]})})]})]})},f=n(759),h=n(34333);function b(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function g(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?b(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var v=(0,i.Gp)((function(e,r){var n=e.buttonProps,t=e.children,i=e.onClose,s=e.subjectRequest,c=(0,f.Z)({subjectRequest:s}),a=c.handleApproveRequest,u=c.isLoading,l=(0,o.qY)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.S,g(g({ref:r,onClick:l.onOpen,isLoading:u,isDisabled:u},n),{},{"data-testid":"privacy-request-approve-btn",children:t})),(0,d.jsx)(p,{isOpen:l.isOpen,isLoading:u,onClose:function(){l.onClose(),null===i||void 0===i||i()},onApproveRequest:a,subjectRequest:s})]})}))},20970:function(e,r,n){n.d(r,{Z:function(){return y}});var t=n(90849),i=n(32393),o=n(21084),s=n(60530),c=n(29549),a=n(43139),u=n(34090),l=n(27378),d=n(68301),p=n(24246),f={denialReason:""},h=function(e){var r=e.isOpen,n=e.onClose,t=e.onDenyRequest,i=(0,l.useCallback)((function(e,r){var i=r.setSubmitting;t(e.denialReason).then((function(){i(!1),n()}))}),[t,n]);return(0,p.jsxs)(s.u_,{isOpen:r,onClose:n,isCentered:!0,returnFocusOnClose:!1,children:[(0,p.jsx)(s.ZA,{}),(0,p.jsx)(s.hz,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,p.jsx)(u.J9,{initialValues:f,validationSchema:d.Ry({denialReason:d.Z_().required().label("Reason for denial")}),onSubmit:i,children:function(e){var r=e.isSubmitting,t=e.dirty,i=e.isValid;return(0,p.jsxs)(u.l0,{children:[(0,p.jsx)(s.xB,{children:"Privacy request denial"}),(0,p.jsx)(s.fe,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,p.jsx)(s.fe,{children:(0,p.jsx)(a.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,p.jsxs)(s.mz,{children:[(0,p.jsx)(c.zx,{variant:"outline",size:"sm",width:"100%",maxWidth:"198px",mr:3,disabled:r,onClick:n,children:"Cancel"}),(0,p.jsx)(c.zx,{type:"submit",size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",disabled:!t||!i,isLoading:r,"data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})},b=n(759),g=n(34333);function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var y=(0,i.Gp)((function(e,r){var n=e.buttonProps,t=e.children,i=e.onClose,s=e.subjectRequest,c=(0,b.Z)({subjectRequest:s}),a=c.handleDenyRequest,u=c.isLoading,l=(0,o.qY)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g.S,j(j({ref:r,onClick:l.onOpen,isLoading:u,isDisabled:u},n),{},{"data-testid":"privacy-request-deny-btn",children:t})),(0,p.jsx)(h,{isOpen:l.isOpen,onClose:function(){l.onClose(),null===i||void 0===i||i()},onDenyRequest:a})]})}))},30199:function(e,r,n){var t=n(90849),i=n(55732),o=n(97865),s=n(34707),c=n.n(s),a=n(32393),u=n(34896),l=n(29549),d=n(27378),p=n(6848),f=n(78624),h=n(9408),b=n(51365),g=n(24246);function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var y=(0,a.Gp)((function(e,r){var n=e.buttonProps,t=e.handleBlur,s=e.subjectRequest,a=(0,p.T)(),v=(0,d.useState)(!1),y=v[0],x=v[1],m=(0,h.VY)(),O=m.errorAlert,P=m.successAlert,w=(0,p.C)(b.fe).errorRequests,C=(0,b.JD)(),q=(0,o.Z)(C,1)[0],R=(0,b.Fq)(),S=(0,o.Z)(R,1)[0],D=function(){var e=(0,i.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,q(w);case 3:"error"in(r=e.sent)?(a((0,b.uT)({checkAll:!1,errorRequests:[]})),O((0,f.e$)(r.error),"DSR batch automation has failed due to the following:",{duration:null})):(r.data.failed.length>0&&O((0,g.jsxs)(u.xu,{children:["DSR automation has failed for"," ",(0,g.jsx)(u.xv,{as:"span",fontWeight:"semibold",children:r.data.failed.length})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null}),r.data.succeeded.length>0&&P("Privacy request(s) are now being reprocessed.")),x(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return x(!0),e.next=5,S(s);case 5:"error"in(n=e.sent)?O((0,f.e$)(n.error),"DSR automation has failed for this privacy request due to the following:",{duration:null}):P("Privacy request is now being reprocessed."),x(!1),t&&t(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)(l.zx,j(j({},n),{},{isDisabled:y,isLoading:y,loadingText:"Reprocessing",onClick:s?E:D,ref:r,spinnerPlacement:"end",variant:"outline",_hover:{bg:"gray.100"},_loading:{opacity:1,div:{opacity:.4}},children:"Reprocess"}))}));r.Z=y},34333:function(e,r,n){n.d(r,{S:function(){return a}});var t=n(90849),i=n(32393),o=n(29549),s=n(24246);function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}var a=(0,i.Gp)((function(e,r){return(0,s.jsx)(o.zx,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({ref:r,size:"xs",bg:"white",_loading:{opacity:1,div:{opacity:.4}},_hover:{bg:"gray.100"}},e))}))},759:function(e,r,n){n.d(r,{Z:function(){return o}});var t=n(97865),i=n(51365),o=function(e){var r=e.subjectRequest,n=(0,i.RW)({fixedCacheKey:r.id}),o=(0,t.Z)(n,2),s=o[0],c=o[1],a=(0,i.F1)({fixedCacheKey:r.id}),u=(0,t.Z)(a,2),l=u[0],d=u[1],p=d.isLoading||c.isLoading;return{approveRequest:s,approveRequestResult:c,denyRequest:l,denyRequestResult:d,handleApproveRequest:function(){return s(r)},handleDenyRequest:function(e){return l({id:r.id,reason:e})},isLoading:p}}},9481:function(e,r,n){var t,i;n.d(r,{U:function(){return t},n:function(){return i}}),function(e){e.ACCESS="access",e.ERASURE="erasure",e.CONSENT="consent",e.UPDATE="update"}(t||(t={})),function(e){e.IN_PROCESSING="in_processing",e.PENDING="pending",e.COMPLETE="complete",e.ERROR="error",e.PAUSED="paused",e.RETRYING="retrying",e.SKIPPED="skipped"}(i||(i={}))}}]);