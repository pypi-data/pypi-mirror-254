export const id=16938;export const ids=[16938,60609];export const modules={72043:(t,e,a)=>{a.d(e,{A:()=>d,v:()=>o});var s=a(23158),l=a(25101),c=a(66477);const r=(t,e,a,c)=>{const r=a((0,s.Z)(t,e),c);return r instanceof Date?(0,l.Z)(r,e):r},d=(t,e,a,s,l)=>a.time_zone===c.c_.server?r(t,s.time_zone,e,l):e(t,l),o=(t,e,a,s,l)=>a.time_zone===c.c_.server?r(t,s.time_zone,e,l):e(t,l)},92306:(t,e,a)=>{a.d(e,{v:()=>s});const s=(t,e)=>{const a={};for(const s of t){const t=e(s);t in a?a[t].push(s):a[t]=[s]}return a}},81582:(t,e,a)=>{a.d(e,{DJ:()=>c,LZ:()=>s,Nn:()=>i,Ny:()=>_,Pk:()=>h,Q4:()=>l,RQ:()=>d,SO:()=>o,T0:()=>u,iJ:()=>n,pB:()=>r});const s=32143==a.j?["migration_error","setup_error","setup_retry"]:null,l=32143==a.j?["not_loaded","loaded","setup_error","setup_retry"]:null,c=(t,e,a)=>{const s={type:"config_entries/subscribe"};return a&&a.type&&(s.type_filter=a.type),t.connection.subscribeMessage((t=>e(t)),s)},r=(t,e)=>{const a={};return e&&(e.type&&(a.type_filter=e.type),e.domain&&(a.domain=e.domain)),t.callWS({type:"config_entries/get",...a})},d=(t,e)=>t.callWS({type:"config_entries/get_single",entry_id:e}),o=(t,e,a)=>t.callWS({type:"config_entries/update",entry_id:e,...a}),n=(t,e)=>t.callApi("DELETE",`config/config_entries/entry/${e}`),i=(t,e)=>t.callApi("POST",`config/config_entries/entry/${e}/reload`),_=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:"user"}),u=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:null}),h=(t,e)=>{const a=[...t],s=t=>{const a=e[t.domain];return"helper"===(null==a?void 0:a.integration_type)?-1:1};return a.sort(((t,e)=>s(e)-s(t)))}},55424:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.d(e,{Bm:()=>k,Cj:()=>W,G9:()=>L,Jj:()=>D,KU:()=>Z,P:()=>K,UB:()=>B,ZC:()=>T,_Z:()=>z,b:()=>q,gy:()=>P,iK:()=>C,jB:()=>F,kJ:()=>O,o1:()=>w,rl:()=>S,vE:()=>R,xZ:()=>j,yH:()=>V});var l=a(24112),c=a(74774),r=a(63390),d=a(32182),o=a(38588),n=a(79021),i=a(39244),_=a(59429),u=a(93752),h=a(59699),y=a(97330),m=a(72043),b=a(49684),g=a(92306),f=a(81582),p=a(38014),v=t([b]);b=(v.then?(await v)():v)[0];const $=[],k=()=>({stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),w=()=>({stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}),C=()=>({type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}),S=()=>({type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}),K=()=>({type:"battery",stat_energy_from:"",stat_energy_to:""}),Z=()=>({type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),W=()=>({type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),j=t=>t.callWS({type:"energy/info"}),P=async t=>(await t.loadBackendTranslation("issues","energy"),t.callWS({type:"energy/validate"})),T=t=>t.callWS({type:"energy/get_prefs"}),z=async(t,e)=>{const a=t.callWS({type:"energy/save_prefs",...e});return M(t),a},x=async(t,e,a,s,l,c="hour")=>t.callWS({type:"energy/fossil_energy_consumption",start_time:e.toISOString(),end_time:null==l?void 0:l.toISOString(),energy_statistic_ids:a,co2_statistic_id:s,period:c}),D=t=>(0,g.v)(t.energy_sources,(t=>t.type)),V=(t,e,a)=>{const s=[];for(const l of t.energy_sources)if(!a||a.includes(l.type))if("solar"!==l.type)if("gas"!==l.type&&"water"!==l.type)if("battery"!==l.type){for(const t of l.flow_from){s.push(t.stat_energy_from),t.stat_cost&&s.push(t.stat_cost);const a=e.cost_sensors[t.stat_energy_from];a&&s.push(a)}for(const t of l.flow_to){s.push(t.stat_energy_to),t.stat_compensation&&s.push(t.stat_compensation);const a=e.cost_sensors[t.stat_energy_to];a&&s.push(a)}}else s.push(l.stat_energy_from),s.push(l.stat_energy_to);else{s.push(l.stat_energy_from),l.stat_cost&&s.push(l.stat_cost);const t=e.cost_sensors[l.stat_energy_from];t&&s.push(t)}else s.push(l.stat_energy_from);return s},E=async(t,e,a,s,_)=>{const[u,h]=await Promise.all([(0,f.pB)(t,{domain:"co2signal"}),j(t)]),y=u.length?u[0]:void 0;let b;if(y)for(const e of Object.values(t.entities)){if("co2signal"!==e.platform)continue;const a=t.states[e.entity_id];if(a&&"%"===a.attributes.unit_of_measurement){b=a.entity_id;break}}const g=[];for(const t of e.energy_sources)if("grid"===t.type)for(const e of t.flow_from)g.push(e.stat_energy_from);const v=V(e,h,["grid","solar","battery","gas"]),$=V(e,h,["water"]),k=[...v,...$],w=(0,l.Z)(s||new Date,a),C=w>35?"month":w>2?"day":"hour",S=t.config.unit_system.length||"",K={energy:"kWh",volume:"km"===S?"m続":"ft続"},Z={volume:"km"===S?"L":"gal"},W=v.length?(0,p.dL)(t,a,s,v,C,K,["change"]):{},P=$.length?(0,p.dL)(t,a,s,$,C,Z,["change"]):{};let T,z,D,E,M,A={},B={};_&&(z=(0,m.v)(a,c.Z,t.locale,t.config)&&(0,m.v)(s||new Date,r.Z,t.locale,t.config)?(0,m.A)(a,d.Z,t.locale,t.config,-(0,m.v)(s||new Date,o.Z,t.locale,t.config,a)-1):(0,m.A)(a,n.Z,t.locale,t.config,-1*(w+1)),D=(0,i.Z)(a,-1),v.length&&(A=(0,p.dL)(t,z,D,v,C,K,["change"])),$.length&&(B=(0,p.dL)(t,z,D,$,C,Z,["change"]))),void 0!==b&&(E=x(t,a,g,b,s,w>35?"month":w>2?"day":"hour"),_&&(M=x(t,z,g,b,D,w>35?"month":w>2?"day":"hour")));const F={},H=k.length?(0,p.Py)(t,k):[],[L,R,q,O,J,U,N]=await Promise.all([W,P,A,B,H,E,M]),I={...L,...R};_&&(T={...q,...O}),k.length&&J.forEach((t=>{F[t.statistic_id]=t}));return{start:a,end:s,startCompare:z,endCompare:D,info:h,prefs:e,stats:I,statsMetadata:F,statsCompare:T,co2SignalConfigEntry:y,co2SignalEntity:b,fossilEnergyConsumption:U,fossilEnergyConsumptionCompare:N}},M=t=>{$.forEach((e=>{const a=B(t,{key:e});a.clearPrefs(),a._active&&a.refresh()}))},A=t=>{if(t._refreshTimeout&&clearTimeout(t._refreshTimeout),t._active&&(!t.end||t.end>new Date)){const e=new Date;e.getMinutes()>=20&&e.setHours(e.getHours()+1),e.setMinutes(20,0,0),t._refreshTimeout=window.setTimeout((()=>t.refresh()),e.getTime()-Date.now())}},B=(t,e={})=>{let a="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");a=`_${e.key}`}if(t.connection[a])return t.connection[a];$.push(e.key);const s=(0,y._)(t.connection,a,(async()=>(s.prefs||(s.prefs=await T(t)),A(s),E(t,s.prefs,s.start,s.end,s.compare)))),l=s.subscribe;s.subscribe=t=>{const e=l(t);return s._active++,void 0===s._refreshTimeout&&A(s),()=>{s._active--,s._active<1&&(clearTimeout(s._refreshTimeout),s._refreshTimeout=void 0),e()}},s._active=0,s.prefs=e.prefs;const c=new Date,r=(0,b.Zs)(c,t.locale,t.config).split(":")[0];s.start=(0,m.A)("0"===r?(0,n.Z)(c,-1):c,_.Z,t.locale,t.config),s.end=(0,m.A)("0"===r?(0,n.Z)(c,-1):c,u.Z,t.locale,t.config);const d=()=>{s._updatePeriodTimeout=window.setTimeout((()=>{s.start=(0,m.A)(new Date,_.Z,t.locale,t.config),s.end=(0,m.A)(new Date,u.Z,t.locale,t.config),d()}),(0,h.Z)((0,m.A)(c,u.Z,t.locale,t.config),1).getTime()-Date.now())};return d(),s.clearPrefs=()=>{s.prefs=void 0},s.setPeriod=(e,a)=>{var l;s.start=e,s.end=a,s.start.getTime()!==(0,m.A)(new Date,_.Z,t.locale,t.config).getTime()||(null===(l=s.end)||void 0===l?void 0:l.getTime())!==(0,m.A)(new Date,u.Z,t.locale,t.config).getTime()||s._updatePeriodTimeout?s._updatePeriodTimeout&&(clearTimeout(s._updatePeriodTimeout),s._updatePeriodTimeout=void 0):d()},s.setCompare=t=>{s.compare=t},s},F=t=>t.callWS({type:"energy/solar_forecast"}),H=["volume","energy"],L=(t,e={},a)=>{for(const s of t.energy_sources){if("gas"!==s.type)continue;if(a&&a===s.stat_energy_from)continue;const t=e[s.stat_energy_from];if(H.includes(null==t?void 0:t.unit_class))return t.unit_class}},R=(t,e,a={})=>{const s=L(e,a);if(void 0!==s)return"energy"===s?"kWh":"km"===t.config.unit_system.length?"m続":"ft続"},q=t=>"km"===t.config.unit_system.length?"L":"gal",O="/docs/energy/faq/#troubleshooting-missing-entities";s()}catch(t){s(t)}}))},73826:(t,e,a)=>{a.d(e,{f:()=>d});var s=a(17463),l=a(34541),c=a(47838),r=a(79932);const d=t=>(0,s.Z)(null,(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,l.Z)((0,c.Z)(a.prototype),"connectedCallback",this).call(this),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,l.Z)((0,c.Z)(a.prototype),"disconnectedCallback",this).call(this),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,l.Z)((0,c.Z)(a.prototype),"updated",this).call(this,t),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this.__checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((t=>void 0===this[t]))||(this.__unsubs=this.hassSubscribe())}}]}}),t)},16938:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.r(e),a.d(e,{HuiEnergySourcesTableCard:()=>g});var l=a(17463),c=a(40521),r=a(68144),d=a(79932),o=a(47501),n=a(15838),i=a(89525),_=a(18457),u=(a(22098),a(55424)),h=a(38014),y=a(73826),m=a(53658),b=t([u]);u=(b.then?(await b)():b)[0];let g=(0,l.Z)([(0,d.Mo)("hui-energy-sources-table-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){var t;return[(0,u.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((t=>{this._data=t}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,m.SN)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"_getColor",value:function(t,e,a,s){let l=t.getPropertyValue(e+"-"+s).trim();if(0===l.length){const t=s>0?this.hass.themes.darkMode?(0,i.C)((0,n.Rw)((0,n.wK)(a)),s):(0,i.W)((0,n.Rw)((0,n.wK)(a)),s):void 0;l=t?(0,n.CO)((0,n.p3)(t)):a}return l}},{kind:"method",key:"render",value:function(){var t,e,a,s,l,c,d,n,i;if(!this.hass||!this._config)return r.Ld;if(!this._data)return r.dy`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;let y=0,m=0,b=0,g=0,f=0,p=0,v=0,$=0,k=!1,w=!1,C=!1,S=0,K=0,Z=0,W=0,j=0,P=0,T=0,z=0;const x=(0,u.Jj)(this._data.prefs),D="--energy-grid-return-color",V="--energy-grid-consumption-color",E="--energy-battery-in-color",M="--energy-battery-out-color",A="--energy-solar-color",B="--energy-gas-color",F="--energy-water-color",H=getComputedStyle(this),L=H.getPropertyValue(A).trim(),R=H.getPropertyValue(M).trim(),q=H.getPropertyValue(E).trim(),O=H.getPropertyValue(D).trim(),J=H.getPropertyValue(V).trim(),U=H.getPropertyValue(B).trim(),N=H.getPropertyValue(F).trim(),I=(null===(t=x.grid)||void 0===t?void 0:t[0].flow_from.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)))||(null===(e=x.grid)||void 0===e?void 0:e[0].flow_to.some((t=>t.stat_compensation||t.entity_energy_price||t.number_energy_price)))||(null===(a=x.gas)||void 0===a?void 0:a.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)))||(null===(s=x.water)||void 0===s?void 0:s.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price))),Q=(0,u.vE)(this.hass,this._data.prefs,this._data.statsMetadata)||"",G=(0,u.b)(this.hass)||"m続",X=void 0!==this._data.statsCompare;return r.dy` <ha-card> ${this._config.title?r.dy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="mdc-data-table"> <div class="mdc-data-table__table-container"> <table class="mdc-data-table__table" aria-label="Energy sources"> <thead> <tr class="mdc-data-table__header-row"> <th class="mdc-data-table__header-cell"></th> <th class="mdc-data-table__header-cell" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.source")} </th> ${X?r.dy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_energy")} </th> ${I?r.dy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_cost")} </th>`:""}`:""} <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.energy")} </th> ${I?r.dy` <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.cost")} </th>`:""} </tr> </thead> <tbody class="mdc-data-table__content"> ${null===(l=x.solar)||void 0===l?void 0:l.map(((t,e)=>{var a;const s=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0;b+=s;const l=X&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0;Z+=l;const c=this._getColor(H,A,L,e);return r.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:c,backgroundColor:c+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${x.solar?r.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.solar_total")} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(Z,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(b,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${null===(c=x.battery)||void 0===c?void 0:c.map(((t,e)=>{var a,s;const l=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0,c=(0,h.Kj)(this._data.stats[t.stat_energy_to])||0;g+=l-c;const d=X&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0,n=X&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_to])||0;W+=d-n;const i=this._getColor(H,M,R,e),u=this._getColor(H,E,q,e);return r.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:i,backgroundColor:i+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(d,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""} </tr> <tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:u,backgroundColor:u+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_to,null===(s=this._data)||void 0===s?void 0:s.statsMetadata[t.stat_energy_to])} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(-1*n,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(-1*c,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${x.battery?r.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.battery_total")} </th> ${X?r.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(W,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(g,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${null===(d=x.grid)||void 0===d?void 0:d.map((t=>r.dy`${t.flow_from.map(((t,e)=>{var a;const s=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0;y+=s;const l=X&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0;S+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],d=c?(0,h.Kj)(this._data.stats[c])||0:null;null!==d&&(k=!0,m+=d);const n=X&&c?(0,h.Kj)(this._data.statsCompare[c])||0:null;null!==n&&(K+=n);const i=this._getColor(H,V,J,e);return r.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:i,backgroundColor:i+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==n?(0,_.uf)(n,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} kWh </td> ${I?r.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==d?(0,_.uf)(d,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${t.flow_to.map(((t,e)=>{var a;const s=-1*((0,h.Kj)(this._data.stats[t.stat_energy_to])||0);y+=s;const l=t.stat_compensation||this._data.info.cost_sensors[t.stat_energy_to],c=l?-1*((0,h.Kj)(this._data.stats[l])||0):null;null!==c&&(k=!0,m+=c);const d=-1*(X&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_to])||0);S+=d;const n=X&&l?-1*((0,h.Kj)(this._data.statsCompare[l])||0):null;null!==n&&(K+=n);const i=this._getColor(H,D,O,e);return r.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:i,backgroundColor:i+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_to,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_to])} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(d,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==n?(0,_.uf)(n,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} kWh </td> ${I?r.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==c?(0,_.uf)(c,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))}`))} ${x.grid?r.dy` <tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.grid_total")} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(S,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${k?(0,_.uf)(K,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(y,this.hass.locale)} kWh </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${k?(0,_.uf)(m,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${null===(n=x.gas)||void 0===n?void 0:n.map(((t,e)=>{var a;const s=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0;f+=s;const l=X&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0;j+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],d=c?(0,h.Kj)(this._data.stats[c])||0:null;null!==d&&(w=!0,p+=d);const n=X&&c?(0,h.Kj)(this._data.statsCompare[c])||0:null;null!==n&&(P+=n);const i=this._getColor(H,B,U,e);return r.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:i,backgroundColor:i+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${X?r.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} ${Q} </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==n?(0,_.uf)(n,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} ${Q} </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==d?(0,_.uf)(d,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${x.gas?r.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.gas_total")} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(j,this.hass.locale)} ${Q} </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${w?(0,_.uf)(P,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(f,this.hass.locale)} ${Q} </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${w?(0,_.uf)(p,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${null===(i=x.water)||void 0===i?void 0:i.map(((t,e)=>{var a;const s=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0;v+=s;const l=X&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0;T+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],d=c?(0,h.Kj)(this._data.stats[c])||0:null;null!==d&&(C=!0,$+=d);const n=X&&c?(0,h.Kj)(this._data.statsCompare[c])||0:null;null!==n&&(z+=n);const i=this._getColor(H,F,N,e);return r.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:i,backgroundColor:i+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${X?r.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} ${G} </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==n?(0,_.uf)(n,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} ${G} </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==d?(0,_.uf)(d,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${x.water?r.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.water_total")} </th> ${X?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(T,this.hass.locale)} ${G} </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${C?(0,_.uf)(z,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(v,this.hass.locale)} ${G} </td> ${I?r.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${C?(0,_.uf)($,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${[w,C,k].filter(Boolean).length>1?r.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.total_costs")} </th> ${X?r.dy`<td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(P+K+z,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} <td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(p+m+$,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td> </tr>`:""} </tbody> </table> </div> </div> </ha-card>`}},{kind:"get",static:!0,key:"styles",value:function(){return r.iv`${(0,r.$m)(c)} .mdc-data-table{width:100%;border:0}.mdc-data-table__cell,.mdc-data-table__header-cell{color:var(--primary-text-color);border-bottom-color:var(--divider-color);text-align:var(--float-start)}.mdc-data-table__row:not(.mdc-data-table__row--selected):hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.total{--mdc-typography-body2-font-weight:500}.total .mdc-data-table__cell{border-top:1px solid var(--divider-color)}ha-card{height:100%;overflow:hidden}.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.cell-bullet{width:32px;padding-right:0;padding-inline-end:0;padding-inline-start:16px;direction:var(--direction)}.bullet{border-width:1px;border-style:solid;border-radius:4px;height:16px;width:32px}.mdc-data-table__cell--numeric{direction:ltr}`}}]}}),(0,y.f)(r.oi));s()}catch(t){s(t)}}))}};
//# sourceMappingURL=16938.v-4bb0bz9gQ.js.map