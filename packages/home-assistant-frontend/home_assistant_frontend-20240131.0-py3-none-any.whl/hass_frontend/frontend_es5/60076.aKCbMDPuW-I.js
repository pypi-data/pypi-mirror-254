/*! For license information please see 60076.aKCbMDPuW-I.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[60076],{30443:function(t,e,r){r.d(e,{Z:function(){return o}});var n=r(59429),i=r(23682);function o(t,e){(0,i.Z)(2,arguments);var r=(0,n.Z)(t),o=(0,n.Z)(e);return r.getTime()===o.getTime()}},53970:function(t,e,r){r.d(e,{Z:function(){return o}});var n=r(30443),i=r(23682);function o(t){return(0,i.Z)(1,arguments),(0,n.Z)(t,Date.now())}},73589:function(t,e,r){r.d(e,{Z:function(){return i}});r(51467),r(67712),r(63789),r(2094),r(24074);var n=function(t){var e=parseFloat(t);if(isNaN(e))throw new Error("".concat(t," is not a number"));return e};function i(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:n(t.substr(0,t.length-1))};var e=t.replace(":","x").split("x");return 0===e.length?null:1===e.length?{w:n(e[0]),h:1}:{w:n(e[0]),h:n(e[1])}}catch(r){}return null}},58763:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),s=new A(n||[]);return a(o,"_invoke",{value:j(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var v="suspendedStart",y="suspendedYield",p="executing",g="completed",m={};function _(){}function b(){}function w(){}var k={};h(k,u,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==r&&o.call(E,u)&&(k=E);var L=w.prototype=_.prototype=Object.create(k);function O(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,a,s,u){var c=d(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==n(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var i=v;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=H(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?g:y,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=g,n.method="throw",n.arg=c.arg)}}}function H(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,H(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function Z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Z,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,h(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},O(S.prototype),h(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new S(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(L),h(L,l,"Generator"),h(L,u,(function(){return this})),h(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function o(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}r.a(t,function(){var t,n=(t=i().mark((function t(n,o){var a,s,u,c,l,h,f,d,v,y,p,g,m,_,b,w,k,x,E,L,O,S,j,H;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.d(e,{Nu:function(){return j},Vk:function(){return m},xS:function(){return b},xj:function(){return H}}),a=r(53709),s=r(40039),u=r(71650),c=r(33368),r(97393),r(87438),r(85472),r(40271),r(91989),r(46349),r(36513),r(37313),r(80628),r(85717),r(65974),r(46798),r(60163),r(9849),r(22890),r(90126),r(50289),r(70320),r(13526),r(94167),l=r(58831),h=r(29171),f=r(91741),!(d=n([h])).then){t.next=57;break}return t.next=53,d;case 53:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=58;break;case 57:t.t0=d;case 58:h=t.t0[0],v=["climate","humidifier","water_heater"],y=["climate","humidifier","input_datetime","thermostat","water_heater","person","device_tracker"],p=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],g=function(t,e){return!t.states[e]||y.includes((0,l.M)(e))},m=function(t,e,r,n,i){var o={type:"history/stream",entity_ids:i,start_time:r.toISOString(),end_time:n.toISOString(),minimal_response:!0,no_attributes:!i.some((function(e){return g(t,e)}))},a=new _(t);return t.connection.subscribeMessage((function(t){return e(a.processMessage(t))}),o)},_=function(){function t(e,r){(0,u.Z)(this,t),this.hass=void 0,this.hoursToShow=void 0,this.combinedHistory=void 0,this.hass=e,this.hoursToShow=r,this.combinedHistory={}}return(0,c.Z)(t,[{key:"processMessage",value:function(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;for(var e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,r={},n=0,i=Object.keys(this.combinedHistory);n<i.length;n++)r[i[n]]=[];for(var o=0,a=Object.keys(t.states);o<a.length;o++)r[a[o]]=[];for(var s=0,u=Object.keys(r);s<u.length;s++){var c=u[s];if(c in this.combinedHistory&&c in t.states){var l=this.combinedHistory[c],h=l[l.length-1];r[c]=l.concat(t.states[c]),t.states[c][0].lu<h.lu&&(r[c]=r[c].sort((function(t,e){return t.lu-e.lu})))}else c in this.combinedHistory?r[c]=this.combinedHistory[c]:r[c]=t.states[c];if(e&&c in this.combinedHistory){var f=r[c].filter((function(t){return t.lu<e}));if(!f.length)continue;if(r[c]=r[c].filter((function(t){return t.lu>=e})),r[c].length&&r[c][0].lu===e)continue;var d=f[f.length-1];d.lu=e,r[c].unshift(d)}}return this.combinedHistory=r,this.combinedHistory}}]),t}(),b=function(t,e,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6?arguments[6]:void 0,s={type:"history/stream",entity_ids:n,start_time:new Date((new Date).getTime()-3600*r*1e3).toISOString(),minimal_response:i,significant_changes_only:o,no_attributes:null!=a?a:!n.some((function(e){return g(t,e)}))},u=new _(t,r);return t.connection.subscribeMessage((function(t){return e(u.processMessage(t))}),s)},w=function(t,e){return t.state===e.state&&(!t.attributes||!e.attributes||p.every((function(r){return t.attributes[r]===e.attributes[r]})))},k=function(t,e,r,n,i,o,a){var u,c=[],l=o[0],d=(0,s.Z)(o);try{for(d.s();!(u=d.n()).done;){var v=u.value;if(!(c.length>0&&v.s===c[c.length-1].state)){var y={};null!=a&&a.attributes.device_class&&(y.device_class=null==a?void 0:a.attributes.device_class),c.push({state_localize:(0,h.computeStateDisplayFromEntityAttributes)(t,e,r,n[i],i,Object.assign(Object.assign({},v.a||l.a),y),v.s),state:v.s,last_changed:1e3*(v.lc?v.lc:v.lu)})}}}catch(p){d.e(p)}finally{d.f()}return{name:(0,f.a)(i,(null==a?void 0:a.attributes)||l.a),entity_id:i,data:c}},x=function(t,e,r,n){var i=[];return Object.keys(r).forEach((function(t){var e,o=r[t],a=o[0],u=(0,l.M)(t),c=[],h=(0,s.Z)(o);try{for(h.s();!(e=h.n()).done;){var d=e.value,y=void 0;if(v.includes(u)){y={state:d.s,last_changed:1e3*d.lu,attributes:{}};for(var g=0,m=p;g<m.length;g++){var _=m[g];_ in d.a&&(y.attributes[_]=d.a[_])}}else y={state:d.s,last_changed:1e3*(d.lc?d.lc:d.lu),attributes:{}};c.length>1&&w(y,c[c.length-1])&&w(y,c[c.length-2])||c.push(y)}}catch(k){h.e(k)}finally{h.f()}var b=t in n?n[t].attributes:"friendly_name"in a.a?a.a:void 0;i.push({domain:u,name:(0,f.a)(t,b||{}),entity_id:t,states:c})})),{unit:t,device_class:e,identifier:Object.keys(r).join(""),data:i}},E=["counter","input_number","number"],L=function(t){return E.includes(t)},O=function(t){return"unit_of_measurement"in t||"state_class"in t},S=function(t,e){return null!=t.attributes.device_class&&e.includes(t.attributes.device_class)},j=function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={},s=[];return e?(Object.keys(e).forEach((function(u){var c,h=e[u];if(0!==h.length){var f,d=(0,l.M)(u),v=u in t.states?t.states[u]:void 0,y=v||L(d)?void 0:h.find((function(t){return t.a&&O(t.a)}));f=L(d)||null!=v&&O(v.attributes)||null!=v&&"sensor"===d&&S(v,n)||null!=y?(null==v?void 0:v.attributes.unit_of_measurement)||(null==y?void 0:y.a.unit_of_measurement)||" ":{zone:r("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[d];var p={climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[d]||(null===(c=(null==v?void 0:v.attributes)||(null==y?void 0:y.a))||void 0===c?void 0:c.device_class),g=H(f,p,i);if(f)if(g&&g in o&&u in o[g]){var m;(m=o[g][u]).push.apply(m,(0,a.Z)(h))}else g&&(g in o||(o[g]={}),o[g][u]=h);else s.push(k(r,t.locale,t.config,t.entities,u,h,v))}})),{line:Object.keys(o).map((function(e){var r=e.split("_"),n=r[0],i=r[1]||void 0;return x(n,i,o[e],t.states)})),timeline:s}):{line:[],timeline:[]}},H=function(t,e,r){return r?"".concat(t,"_").concat(e||""):t},o(),t.next=83;break;case 80:t.prev=80,t.t2=t.catch(0),o(t.t2);case 83:case"end":return t.stop()}}),t,null,[[0,80]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,u,"next",t)}function u(t){o(a,n,i,s,u,"throw",t)}s(void 0)}))});return function(t,e){return n.apply(this,arguments)}}())},60076:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),s=new A(n||[]);return a(o,"_invoke",{value:j(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var v="suspendedStart",y="suspendedYield",p="executing",g="completed",m={};function _(){}function b(){}function w(){}var k={};h(k,u,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==r&&o.call(E,u)&&(k=E);var L=w.prototype=_.prototype=Object.create(k);function O(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,a,s,u){var c=d(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==n(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var i=v;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=H(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?g:y,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=g,n.method="throw",n.arg=c.arg)}}}function H(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,H(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function Z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Z,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,h(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},O(S.prototype),h(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new S(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(L),h(L,l,"Generator"),h(L,u,(function(){return this})),h(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}r.a(t,function(){var t,n=(t=i().mark((function t(n,a){var s,u,c,l,h,f,d,v,y,p,g,m,_,b,w,k,x,E,L,O,S,j,H,Z,M,A,P,N,T,F,I,C,G,z,V,D;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.r(e),r.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return V},DEFAULT_ZOOM:function(){return D}}),s=r(40039),u=r(53709),c=r(88962),l=r(99312),h=r(81043),f=r(33368),d=r(71650),v=r(68308),y=r(82390),p=r(69205),g=r(91808),m=r(34541),_=r(47838),r(51467),r(97393),r(40271),r(51358),r(46349),r(36513),r(22859),r(76843),r(5110),r(65974),r(46798),r(10733),r(47084),r(60163),r(5239),r(70320),r(98490),b=r(53970),w=r(68144),k=r(95260),x=r(14516),E=r(55070),L=r(7323),O=r(44583),S=r(49684),j=r(58831),H=r(36639),Z=r(73589),r(22098),r(9381),r(10983),r(13786),M=r(58763),A=r(53658),P=r(15688),N=r(90271),!(T=n([O,S,M])).then){t.next=77;break}return t.next=73,T;case 73:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=78;break;case 77:t.t0=T;case 78:F=t.t0,I=o(F,3),O=I[0],S=I[1],M=I[2],V=0,D=14,(0,g.Z)([(0,k.Mo)("hui-map-card")],(function(t,e){var n,i=function(e){function r(){var e;(0,d.Z)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=(0,v.Z)(this,r,[].concat(i)),t((0,y.Z)(e)),e}return(0,p.Z)(r,e),(0,f.Z)(r)}(e);return{F:i,d:[{kind:"field",decorators:[(0,k.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.Cb)({type:Boolean,reflect:!0})],key:"isPanel",value:function(){return!1}},{kind:"field",decorators:[(0,k.SB)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,k.IO)("ha-map")],key:"_map",value:void 0},{kind:"field",key:"_configEntities",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_mapEntities",value:function(){return[]}},{kind:"field",key:"_colorDict",value:function(){return{}}},{kind:"field",key:"_colorIndex",value:function(){return 0}},{kind:"field",decorators:[(0,k.SB)()],key:"_error",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"setConfig",value:function(t){var e;if(!t)throw new Error("Error in card configuration.");if(!(null!==(e=t.entities)&&void 0!==e&&e.length||t.geo_location_sources))throw new Error("Either entities or geo_location_sources must be specified");if(t.entities&&!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(t.geo_location_sources&&!Array.isArray(t.geo_location_sources))throw new Error("Parameter geo_location_sources needs to be an array");this._config=t,this._configEntities=t.entities?(0,N.A)(t.entities):[],this._mapEntities=this._getMapEntities()}},{kind:"method",key:"getCardSize",value:function(){var t;if(null===(t=this._config)||void 0===t||!t.aspect_ratio)return 7;var e=(0,Z.Z)(this._config.aspect_ratio),r=e&&e.w>0&&e.h>0?"".concat((100*e.h/e.w).toFixed(2)):"100";return 1+Math.floor(Number(r)/25)||3}},{kind:"method",static:!0,key:"getConfigElement",value:(n=(0,h.Z)((0,l.Z)().mark((function t(){return(0,l.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([r.e(42850),r.e(78133),r.e(50731),r.e(68331),r.e(40163),r.e(74535),r.e(37116),r.e(54107)]).then(r.bind(r,51821));case 2:return t.abrupt("return",document.createElement("hui-map-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,r){return{type:"map",entities:(0,P.j)(t,2,e,r,["device_tracker"])}}},{kind:"method",key:"render",value:function(){var t;return this._config?this._error?(0,w.dy)(C||(C=(0,c.Z)(['<ha-alert alert-type="error"> ',": "," (",") </ha-alert>"])),this.hass.localize("ui.components.map.error"),this._error.message,this._error.code):(0,w.dy)(G||(G=(0,c.Z)([' <ha-card id="card" .header="','"> <div id="root"> <ha-map .hass="','" .entities="','" .zoom="','" .paths="','" .autoFit="','" .fitZones="','" ?darkMode="','" interactiveZones renderPassive></ha-map> <ha-icon-button .label="','" .path="','" @click="','" tabindex="0"></ha-icon-button> </div> </ha-card> '])),this._config.title,this.hass,this._mapEntities,null!==(t=this._config.default_zoom)&&void 0!==t?t:D,this._getHistoryPaths(this._config,this._stateHistory),this._config.auto_fit||!1,this._config.fit_zones,this._config.dark_mode,this.hass.localize("ui.panel.lovelace.cards.map.reset_focus"),"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M19,19H15V21H19A2,2 0 0,0 21,19V15H19M19,3H15V5H19V9H21V5A2,2 0 0,0 19,3M5,5H9V3H5A2,2 0 0,0 3,5V9H5M5,15H3V19A2,2 0 0,0 5,21H9V19H5V15Z",this._fitMap):w.Ld}},{kind:"method",key:"shouldUpdate",value:function(t){var e,r;if(!t.has("hass")||t.size>1)return!0;var n=t.get("hass");return!n||!this._configEntities||n.themes.darkMode!==this.hass.themes.darkMode||!!t.has("_stateHistory")||!(null===(e=this._config)||void 0===e||!e.geo_location_sources||n.states===this.hass.states)||(null!==(r=this._config)&&void 0!==r&&r.entities?(0,A.Wh)(this,t):(0,A.SN)(this,t))}},{kind:"method",key:"willUpdate",value:function(t){var e,r;(0,m.Z)((0,_.Z)(i.prototype),"willUpdate",this).call(this,t),t.has("hass")&&null!==(e=this._config)&&void 0!==e&&e.geo_location_sources&&!(0,H.v)(this._getSourceEntities(null===(r=t.get("hass"))||void 0===r?void 0:r.states),this._getSourceEntities(this.hass.states))&&(this._mapEntities=this._getMapEntities())}},{kind:"method",key:"connectedCallback",value:function(){var t;(0,m.Z)((0,_.Z)(i.prototype),"connectedCallback",this).call(this),this.hasUpdated&&null!==(t=this._configEntities)&&void 0!==t&&t.length&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,m.Z)((0,_.Z)(i.prototype),"disconnectedCallback",this).call(this),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:function(){var t,e,r,n=this;(0,L.p)(this.hass,"history")&&!this._subscribed&&(null!==(t=null===(e=this._config)||void 0===e?void 0:e.hours_to_show)&&void 0!==t?t:V)&&(this._subscribed=(0,M.xS)(this.hass,(function(t){n._subscribed&&(n._stateHistory=t)}),null!==(r=this._config.hours_to_show)&&void 0!==r?r:V,(this._configEntities||[]).map((function(t){return t.entity})),!1,!1,!1).catch((function(t){n._subscribed=void 0,n._error=t})))}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._subscribed&&(this._subscribed.then((function(t){return null==t?void 0:t()})),this._subscribed=void 0)}},{kind:"method",key:"updated",value:function(t){var e;null!==(e=this._configEntities)&&void 0!==e&&e.length?this._subscribed&&!t.has("_config")||(this._unsubscribeHistory(),this._subscribeHistory()):this._unsubscribeHistory(),t.has("_config")&&this._computePadding()}},{kind:"method",key:"_computePadding",value:function(){var t=this.shadowRoot.getElementById("root");if(this._config&&!this.isPanel&&t)if(this._config.aspect_ratio){t.style.height="auto";var e=(0,Z.Z)(this._config.aspect_ratio);t.style.paddingBottom=e&&e.w>0&&e.h>0?"".concat((100*e.h/e.w).toFixed(2),"%"):t.style.paddingBottom="100%"}else t.style.paddingBottom="100%"}},{kind:"method",key:"_fitMap",value:function(){var t;null===(t=this._map)||void 0===t||t.fitMap()}},{kind:"method",key:"_getColor",value:function(t){var e=this._colorDict[t];return e||(e=(0,E.Eu)(this._colorIndex),this._colorIndex++,this._colorDict[t]=e,e)}},{kind:"method",key:"_getSourceEntities",value:function(t){var e;if(!t||null===(e=this._config)||void 0===e||!e.geo_location_sources)return[];for(var r=[],n=this._config.geo_location_sources.includes("all"),i=0,o=Object.values(t);i<o.length;i++){var a=o[i];"geo_location"===(0,j.M)(a.entity_id)&&(n||this._config.geo_location_sources.includes(a.attributes.source))&&r.push(a.entity_id)}return r}},{kind:"method",key:"_getMapEntities",value:function(){var t,e=this;return[].concat((0,u.Z)((this._configEntities||[]).map((function(t){return{entity_id:t.entity,color:e._getColor(t.entity),label_mode:t.label_mode,focus:t.focus,name:t.name}}))),(0,u.Z)(this._getSourceEntities(null===(t=this.hass)||void 0===t?void 0:t.states).map((function(t){return{entity_id:t,color:e._getColor(t)}}))))}},{kind:"field",key:"_getHistoryPaths",value:function(){var t=this;return(0,x.Z)((function(e,r){var n;if(r&&(null!==(n=e.hours_to_show)&&void 0!==n?n:V)){for(var i=[],o=0,a=Object.keys(r);o<a.length;o++){var u=a[o];if("zone"!==(0,j.M)(u)){var c=r[u];if(null!=c&&c.length){var l,h=[],f=(0,s.Z)(c);try{for(f.s();!(l=f.n()).done;){var d,v=l.value,y=v.a.latitude,p=v.a.longitude;if(y&&p){var g={};g.point=[y,p];var m=new Date(1e3*v.lu);(null!==(d=e.hours_to_show)&&void 0!==d?d:V)>144?g.tooltip=(0,O.o0)(m,t.hass.locale,t.hass.config):(0,b.Z)(m)?g.tooltip=(0,S.Vu)(m,t.hass.locale,t.hass.config):g.tooltip=(0,S.xO)(m,t.hass.locale,t.hass.config),h.push(g)}}}catch(_){f.e(_)}finally{f.f()}i.push({points:h,color:t._getColor(u),gradualOpacity:.8})}}}return i}}))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,w.iv)(z||(z=(0,c.Z)(["ha-card{overflow:hidden;width:100%;height:100%;display:flex;flex-direction:column}ha-map{z-index:0;border:none;position:absolute;top:0;left:0;width:100%;height:100%;background:inherit}ha-icon-button{position:absolute;top:75px;left:3px;outline:0}#root{position:relative;height:100%}"])))}}]}}),w.oi),a(),t.next=93;break;case 90:t.prev=90,t.t2=t.catch(0),a(t.t2);case 93:case"end":return t.stop()}}),t,null,[[0,90]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,u,"next",t)}function u(t){s(o,n,i,a,u,"throw",t)}a(void 0)}))});return function(t,e){return n.apply(this,arguments)}}())},5110:function(t,e,r){var n=r(68077),i=r(55418),o=r(97673),a=r(29191),s=r(93892),u=r(18431),c=RangeError,l=String,h=Math.floor,f=i(s),d=i("".slice),v=i(1..toFixed),y=function(t,e,r){return 0===e?r:e%2==1?y(t,e-1,r*t):y(t*t,e/2,r)},p=function(t,e,r){for(var n=-1,i=r;++n<6;)i+=e*t[n],t[n]=i%1e7,i=h(i/1e7)},g=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=h(n/e),n=n%e*1e7},m=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=l(t[e]);r=""===r?n:r+f("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:u((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!u((function(){v({})}))},{toFixed:function(t){var e,r,n,i,s=a(this),u=o(t),h=[0,0,0,0,0,0],v="",_="0";if(u<0||u>20)throw new c("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(v="-",s=-s),s>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(s*y(2,69,1))-69)<0?s*y(2,-e,1):s/y(2,e,1),r*=4503599627370496,(e=52-e)>0){for(p(h,0,r),n=u;n>=7;)p(h,1e7,0),n-=7;for(p(h,y(10,n,1),0),n=e-1;n>=23;)g(h,1<<23),n-=23;g(h,1<<n),p(h,1,1),g(h,2),_=m(h)}else p(h,0,r),p(h,1<<-e,0),_=m(h)+f("0",u);return _=u>0?v+((i=_.length)<=u?"0."+f("0",u-i)+_:d(_,0,i-u)+"."+d(_,i-u)):v+_}})}}]);
//# sourceMappingURL=60076.aKCbMDPuW-I.js.map