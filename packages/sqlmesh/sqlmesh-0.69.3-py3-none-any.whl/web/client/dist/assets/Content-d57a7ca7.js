import{o as F,r as P,j as e,P as g,t as L,p as j,l as Q,q as T,s as z,h as I,v as O,k as R,c as A,a as p,b as M,i as d,f as B,N as k,g as y,w as q}from"./index-66e2613f.js";import{M as H,u as $,L as _,C as G,a as D,b as U}from"./ModelLineage-9c773d12.js";import{v as N,M as V,P as J,S as C}from"./_commonjs-dynamic-modules-c3e257af.js";import{r as h,T as K}from"./Tab-fe283303.js";const b=function({model:s,withModel:n=!0,withDescription:r=!0,withColumns:o=!0,withCode:f=!0,withQuery:m=!0}){const{refetch:a,cancel:c}=F(s.name);return P.useEffect(()=>(a().then(({data:i})=>{s.update(i)}),()=>{c()}),[s.name]),e.jsxs(v,{children:[n&&e.jsx(w,{headline:"Model",defaultOpen:!0,children:e.jsxs("ul",{className:"w-full",children:[e.jsx(x,{name:"Path",value:s.path.split(g).slice(0,-1).join(g)}),e.jsx(x,{name:"Name",title:s.displayName,value:L(s.displayName,50,25)}),e.jsx(x,{name:"Dialect",value:s.dialect}),e.jsx(x,{name:"Type",value:s.type}),Object.entries(s.details??{}).map(([i,u])=>e.jsx(x,{name:i.replaceAll("_"," "),value:u,isCapitalize:!0},i))]})}),r&&e.jsx(w,{headline:"Description",defaultOpen:!0,children:s.description??"No description"}),o&&e.jsx(w,{headline:"Columns",defaultOpen:!0,children:e.jsx(H,{className:"max-h-[15rem]",nodeId:s.name,columns:s.columns,disabled:s==null?void 0:s.isModelPython,withHandles:!1,withSource:!1,withDescription:!0,limit:10})})]})};function W({headline:t}){return e.jsx("div",{className:"text-md font-bold whitespace-nowrap w-full",id:t,children:e.jsx("h3",{className:"py-2",children:t})})}function X(){return e.jsx(v,{className:"font-bold whitespace-nowrap w-full h-full",children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:"Documentation Not Found"})})}function v({children:t,className:s}){return e.jsx("div",{className:j("w-full h-full rounded-xl",s),children:e.jsx("div",{className:"w-full h-full rounded-xl",children:e.jsx("div",{className:"w-full h-full overflow-scroll scrollbar scrollbar--vertical scrollbar--horizontal",children:t})})})}function w({children:t,className:s,headline:n,defaultOpen:r=!1}){return e.jsx("div",{className:"px-1 text-neutral-500 dark:text-neutral-400",children:e.jsx(N,{defaultOpen:r,children:({open:o})=>e.jsxs(e.Fragment,{children:[e.jsxs(N.Button,{className:j("flex items-center justify-between rounded-lg text-left w-full hover:bg-neutral-5 px-3 mb-1 overflow-hidden",s),children:[e.jsx(W,{headline:n}),e.jsx("div",{children:o?e.jsx(V,{className:"w-4 text-neutral-50"}):e.jsx(J,{className:"w-4 text-neutral-50"})})]}),e.jsx(N.Panel,{className:"pb-2 px-2 overflow-hidden",children:e.jsx("div",{className:"px-2 mb-2 text-xs",children:t})})]})})})}function x({className:t,name:s,value:n,isHighlighted:r=!1,isCapitalize:o=!1,children:f,title:m}){return e.jsxs("li",{className:j("w-full border-b last:border-b-0 border-neutral-10 py-1 mb-1 text-neutral-500 dark:text-neutral-400",t),children:[Q(n)?e.jsxs(e.Fragment,{children:[e.jsx("strong",{title:m,className:"mr-2 text-xs capitalize",children:s}),n.map((a,c)=>e.jsx("ul",{className:"w-full flex flex-col whitespace-nowrap p-1 m-1 rounded-md overflow-hidden",children:Object.entries(a).map(([i,u])=>e.jsxs("li",{className:"flex items-center justify-between text-xs border-b border-neutral-10 last:border-b-0 py-1",children:[e.jsxs("strong",{className:"mr-2",children:[i,":"]}),e.jsx("p",{className:"text-xs",children:E(u)})]},i))},c))]}):e.jsxs("div",{className:"flex justify-between text-xs whitespace-nowrap",children:[e.jsx("strong",{className:j("mr-2",o&&"capitalize",r&&"text-brand-500"),children:s}),e.jsx("p",{className:"text-xs rounded text-neutral-500 dark:text-neutral-400",children:E(n)})]}),e.jsx("p",{className:"text-xs ",children:f})]})}b.NotFound=X;b.Container=v;const Y=b;function E(t){const s=new Date(t),n=T(t)&&!isNaN(s.getTime()),r=typeof t=="boolean";return r&&z(t)?"True":r&&I(t)?"False":n?O(s):String(t)}function te(){const{modelName:t}=R(),s=A(),n=p(l=>l.models),r=p(l=>l.lastSelectedModel),o=p(l=>l.setLastSelectedModel),f=M(l=>l.files),m=M(l=>l.setSelectedFile),a=d(t)?r:n.get(encodeURI(t));P.useEffect(()=>{if(B(a)){const l=f.get(a.path);if(d(l))return;m(l)}o(a)},[a]);const c=d(a)?[]:$(a.path,l=>{i==null||i(l.name)});function i(l){const S=n.get(l);d(S)||s(y.IdeDocsModels+"/"+S.name)}function u(l){console.log(l==null?void 0:l.message)}return e.jsx("div",{className:"flex overflow-auto w-full h-full",children:d(a)?e.jsx(k,{link:y.IdeDocs,description:d(t)?void 0:`Model ${t} Does Not Exist`,message:"Back To Docs"}):e.jsx(_,{showColumns:!0,handleClickModel:i,handleError:u,children:e.jsxs(C,{className:"flex h-full w-full",sizes:[65,35],minSize:0,snapOffset:0,children:[e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs(C,{direction:"vertical",sizes:[50,50],minSize:100,snapOffset:0,className:"flex flex-col w-full h-full overflow-hidden",children:[e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(G,{path:a.path,children:({file:l})=>e.jsxs(h.Group,{defaultIndex:a.isModelSQL?1:0,children:[e.jsx(K,{list:["Source Code",a.isModelSQL&&"Compiled Query"].filter(Boolean),className:"!justify-center"}),e.jsxs(h.Panels,{className:"h-full w-full overflow-hidden text-xs",children:[e.jsx(h.Panel,{unmount:!1,className:"w-full h-full",children:e.jsx(D,{content:l.content,type:l.extension,extensions:c})}),a.isModelSQL&&e.jsx(h.Panel,{unmount:!1,className:"w-full h-full",children:e.jsx(D,{type:q.SQL,content:a.sql??"",extensions:c})})]})]})},a.path)}),e.jsx("div",{className:"flex flex-col h-full px-2",children:e.jsx(U,{model:a})})]})}),e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(Y,{model:a,withQuery:a.isModelSQL})})]})})})}export{te as default};
