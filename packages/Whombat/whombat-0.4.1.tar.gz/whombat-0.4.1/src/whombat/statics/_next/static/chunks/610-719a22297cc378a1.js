"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{57305:function(e,t,n){let l=(0,n(2265).createContext)({id:"",username:"",email:""});t.Z=l},7933:function(e,t,n){n.d(t,{Z:function(){return s}});var l=n(57437),a=n(25137);function s(){return(0,l.jsx)("div",{className:"w-full h-full flex flex-row justify-center items-center",children:(0,l.jsx)(a.Z,{})})}},20841:function(e,t,n){n.d(t,{Z:function(){return d},t:function(){return c}});var l=n(57437),a=n(9805),s=n(84766),i=n(2265),o=n(68447),r=n(45987);function d(e){let{title:t,children:n,label:a,open:s=!1,...r}=e,[d,u]=(0,i.useState)(s);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{type:"button",onClick:()=>u(!0),...r,children:a}),(0,l.jsx)(c,{title:(0,l.jsx)("div",{className:"max-w-md",children:t}),isOpen:d,onClose:()=>u(!1),children:e=>{let{close:t}=e;return(0,l.jsx)("div",{className:"max-w-md",children:n({close:t})})}})]})}function c(e){let{title:t,children:n,onClose:d,isOpen:c=!0}=e;return(0,l.jsx)(a.u,{appear:!0,show:c,as:i.Fragment,children:(0,l.jsxs)(s.V,{as:"div",className:"relative z-50",onClose:()=>null==d?void 0:d(),children:[(0,l.jsx)(a.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,l.jsx)("div",{className:"overflow-y-auto fixed inset-0",children:(0,l.jsx)("div",{className:"flex justify-center items-center p-4 min-h-full text-center",children:(0,l.jsx)(a.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,l.jsxs)(s.V.Panel,{className:"overflow-hidden p-6 w-full text-left align-middle rounded-2xl shadow-xl transition-all transform max-w-fit bg-stone-50 text-stone-700 z-[99999] dark:bg-stone-700 dark:text-stone-300",children:[(0,l.jsxs)(s.V.Title,{as:"div",className:"mb-4 flex flex-row justify-between items-center gap-4",children:[null!=t&&(0,l.jsx)("h3",{className:"text-lg font-medium leading-6 text-stone-900 dark:text-stone-100",children:t}),(0,l.jsx)(o.Z,{onClick:()=>null==d?void 0:d(),variant:"secondary",mode:"text",children:(0,l.jsx)(r.Tw,{className:"w-5 h-5"})})]}),(0,l.jsx)("div",{className:"mt-2",children:n({close:()=>null==d?void 0:d()})})]})})})})]})})}},2964:function(e,t,n){n.d(t,{H1:function(){return i},H2:function(){return o},H3:function(){return r},H4:function(){return d}});var l=n(57437),a=n(54440),s=n.n(a);function i(e){let{children:t,className:n,...a}=e;return(0,l.jsx)("h1",{className:s()("text-2xl font-bold text-stone-800 dark:text-stone-300",n),...a,children:t})}function o(e){let{children:t,className:n,...a}=e;return(0,l.jsx)("h2",{className:s()("text-xl font-bold text-stone-800 dark:text-stone-300",n),...a,children:t})}function r(e){let{children:t,className:n,...a}=e;return(0,l.jsx)("h3",{className:s()("text-lg font-semibold leading-7 items-center text-stone-800 dark:text-stone-300",n),...a,children:t})}function d(e){let{children:t,className:n,...a}=e;return(0,l.jsx)("h4",{className:s()(n,"text-md font-semibold leading-6 text-stone-800 dark:text-stone-300"),...a,children:t})}},28215:function(e,t,n){n.d(t,{Z:function(){return d}});var l=n(57437),a=n(54440),s=n.n(a),i=n(61396),o=n.n(i),r=n(68447);function d(e){let{children:t,variant:n="primary",mode:a="filled",padding:i="p-2.5",className:d,...c}=e,u=(0,r.y)({variant:n,mode:a,padding:i});return(0,l.jsx)(o(),{...c,className:s()(u,d),children:t})}},76916:function(e,t,n){n.d(t,{Z:function(){return i}});var l=n(57437),a=n(73999),s=n(3870);function i(e){let{button:t,children:n,placement:i="bottom",offset:o=4,autoPlacement:r=!1}=e;return(0,l.jsx)(a.J,{as:"div",className:"inline-block text-left",children:(0,l.jsxs)(s.bv,{zIndex:10,placement:i,offset:o,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,autoPlacement:r,children:[(0,l.jsx)(a.J.Button,{as:"div",children:t}),(0,l.jsx)(a.J.Panel,{className:"w-72",focus:!0,unmount:!0,children:e=>{let{close:t}=e;return n({close:t})}})]})})}},26356:function(e,t,n){n.d(t,{Z:function(){return r}});var l=n(57437),a=n(2265),s=n(68447),i=n(45987),o=n(90262);function r(e){let{onCreate:t}=e,[n,r]=(0,a.useState)("");return(0,l.jsxs)("div",{className:"flex flex-col p-4 w-full",children:[(0,l.jsx)(o.BZ,{label:"Add a note",name:"message",help:"Write the note message and click on the type of note you want to create.",children:(0,l.jsx)(o.Kx,{name:"message",value:n,placeholder:"Type your note here...",onChange:e=>r(e.target.value)})}),(0,l.jsxs)("div",{className:"flex flex-row gap-4 justify-end",children:[(0,l.jsxs)(s.Z,{variant:"danger",mode:"text",onClick:()=>{r(""),null==t||t({message:n,is_issue:!0})},children:[(0,l.jsx)(i.uN,{className:"inline-block mr-1 w-5 h-5"}),"Add Issue"]}),(0,l.jsxs)(s.Z,{variant:"primary",mode:"text",onClick:()=>{r(""),null==t||t({message:n,is_issue:!1})},children:[(0,l.jsx)(i.uH,{className:"inline-block mr-1 w-5 h-5"}),"Add Note"]})]})]})}},59371:function(e,t,n){n.d(t,{Z:function(){return s}});var l=n(57437);n(2265);var a=n(75881);function s(e){let{notes:t,currentUser:n,onUpdate:s,onDelete:i}=e;return(0,l.jsx)("ul",{"aria-label":"feed",role:"feed",className:"flex relative flex-col gap-12 py-12 pl-6 before:absolute before:top-0 before:left-6 before:h-full before:-translate-x-1/2 before:border before:border-dashed before:border-stone-200 before:dark:border-stone-700 after:absolute after:top-6 after:left-6 after:bottom-6 after:-translate-x-1/2 after:border after:border-stone-200 after:dark:border-stone-700",children:t.map(e=>(0,l.jsx)(a.Z,{note:e,currentUser:n,onUpdate:s,onDelete:i},e.uuid))})}},75881:function(e,t,n){n.d(t,{Z:function(){return d}});var l=n(57437),a=n(68447),s=n(45987),i=n(73558),o=n(81698),r=n(41095);function d(e){var t,n;let{note:d,currentUser:c,actions:u,onUpdate:x,onDelete:m}=e,f=function(e){let{uuid:t,note:n,onUpdate:l,onDelete:a,enabled:s=!0}=e;if(void 0!==n&&n.uuid!==t)throw Error("Note uuid does not match");let{query:i,useMutation:d}=(0,r.ZP)({uuid:t,initial:n,name:"note",enabled:s,getFn:o.Z.notes.get}),c=d({mutationFn:o.Z.notes.update,onSuccess:l}),u=d({mutationFn:o.Z.notes.delete,onSuccess:a});return{...i,update:c,delete:u}}({uuid:d.uuid,note:d,onUpdate:x});return f.isLoading||null==f.data?(0,l.jsx)(i.Z,{}):(0,l.jsx)("li",{role:"article",className:"relative p-2 pl-6",children:(0,l.jsxs)("div",{className:"flex flex-col flex-1 gap-2",children:[(0,l.jsx)("div",{className:"flex absolute -left-3 z-10 flex-row justify-center items-center w-6 h-6 rounded-full bg-stone-100 dark:bg-stone-900",children:f.data.is_issue?(0,l.jsx)(s.uN,{className:"inline-block w-5 h-5 text-red-500"}):(0,l.jsx)(s.Zi,{className:"inline-block w-5 h-5 text-ston-500"})}),(0,l.jsxs)("h4",{className:"flex flex-col items-start text-base font-medium leading-6 md:flex-row lg:items-center text-stone-700 dark:text-stone-300",children:[(0,l.jsx)("span",{className:"flex-1",children:(null===(t=d.created_by)||void 0===t?void 0:t.username)||"anonymous"}),(0,l.jsxs)("span",{className:"text-xs font-normal text-stone-400",children:[" ",f.data.created_on.toLocaleString()]})]}),(0,l.jsx)("p",{className:"text-sm text-stone-500",children:f.data.message}),(0,l.jsxs)("div",{className:"flex flex-row gap-4 justify-end",children:[u,f.data.is_issue&&(0,l.jsxs)(a.Z,{mode:"text",variant:"warning",className:"text-xs",onClick:()=>f.update.mutate({is_issue:!1}),children:[(0,l.jsx)(s.uN,{className:"inline-block mr-1 w-4 h-4"}),"Resolve"]}),(null==c?void 0:c.id)===(null===(n=f.data.created_by)||void 0===n?void 0:n.id)?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(a.Z,{mode:"text",variant:"danger",className:"text-xs",onClick:()=>null==m?void 0:m(f.data),children:[(0,l.jsx)(s.pJ,{className:"inline-block mr-1 w-4 h-4"}),"Remove"]})}):null]})]})})}},48992:function(e,t,n){n.d(t,{Z:function(){return h}});var l=n(57437),a=n(2265),s=n(61865),i=n(74578),o=n(68447),r=n(30143),d=n(45987),c=n(90262),u=n(76916),x=n(82456);function m(e){let{date:t,disabled:n}=e;return(0,l.jsxs)(o.Z,{mode:"text",variant:"secondary",padding:"py-1",disabled:n,children:[(0,l.jsx)(d.IH,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),null!=t?t.toLocaleDateString():(0,l.jsx)("span",{className:"text-sm text-stone-400 dark:text-stone-600",children:"-"})]})}let f=i.z.object({date:i.z.coerce.date().nullish()});function h(e){let{date:t,onChange:n,disabled:i=!1}=e,{register:h,handleSubmit:j,watch:v}=(0,s.cI)({mode:"onChange",values:{date:null==t?"":t.toISOString().split("T")[0]},disabled:i}),p=(0,a.useCallback)(e=>{let{date:t}=f.parse({date:""===e.date?null:e.date});null==n||n({date:t})},[n]);(0,x.Z)({onSubmit:p,watch:v,handleSubmit:j});let[g]=v(["date"]);return i?(0,l.jsx)(m,{date:t,disabled:!0}):(0,l.jsx)(u.Z,{button:(0,l.jsx)(m,{date:t}),children:()=>(0,l.jsxs)(r.Z,{className:"bg-stone-800",children:[(0,l.jsx)(c.BZ,{name:"date",label:"Date",help:"Change date of recording. Format: YYYY-MM-DD",children:(0,l.jsx)(c.II,{type:"date",...h("date"),value:g})}),(0,l.jsxs)(o.Z,{mode:"text",variant:"danger",onClick:()=>null==n?void 0:n({date:null}),children:[(0,l.jsx)(d.Tw,{className:"inline-block mr-1 w-5 h-5"}),"Clear"]})]})})}},66358:function(e,t,n){n.d(t,{ZP:function(){return f},eb:function(){return x},yZ:function(){return m}});var l=n(57437),a=n(5925),s=n(2964),i=n(45987),o=n(99505),r=n(60204),d=n(48992),c=n(52887),u=n(41819);function x(e){var t;return null===(t=e.split("\\").pop())||void 0===t?void 0:t.split("/").pop()}function m(e){return e.split(".").slice(0,-1).join(".")}function f(e){var t;let{recording:n}=e,{path:f}=n,h=m(null!==(t=x(f))&&void 0!==t?t:""),{data:j,update:v}=(0,r.Z)({uuid:n.uuid,recording:n,enabled:!0});return(0,l.jsxs)("div",{className:"flex overflow-x-auto flex-row gap-x-6 items-center w-full",children:[(0,l.jsxs)("div",{className:"inline-flex items-center",children:[(0,l.jsx)(i.He,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),(0,l.jsx)(s.H3,{className:"max-w-xl whitespace-nowrap",children:(0,l.jsx)(o.Z,{tooltip:(0,l.jsxs)("div",{className:"w-96 text-sm font-thin tracking-tighter whitespace-normal break-all dark:bg-stone-700 dark:border-stone-800",children:[(0,l.jsx)("span",{className:"font-normal text-blue-500",children:"Full path:"})," ",f]}),placement:"bottom",children:(0,l.jsxs)("button",{type:"button",className:"overflow-hidden w-full text-ellipsis",onClick:()=>{navigator.clipboard.writeText(f),a.ZP.success("Copied full path to clipboard")},children:[h,(0,l.jsx)("span",{className:"text-sm text-stone-500",children:".WAV"})]})})})]}),(0,l.jsx)(c.Z,{latitude:null==j?void 0:j.latitude,longitude:null==j?void 0:j.longitude,onChange:v.mutate}),(0,l.jsx)(u.Z,{time:null==j?void 0:j.time,onChange:v.mutate}),(0,l.jsx)(d.Z,{date:null==j?void 0:j.date,onChange:v.mutate})]})}},52887:function(e,t,n){n.d(t,{Z:function(){return c}});var l=n(57437),a=n(68447),s=n(30143),i=n(45987),o=n(99219),r=n(76916);function d(e){let{latitude:t,longitude:n,disabled:s}=e,r=null!=t&&null!=n;return(0,l.jsxs)(a.Z,{mode:"text",variant:"secondary",padding:"py-1",disabled:s,children:[(0,l.jsx)(i._t,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),r?(0,o.T)({latitude:t,longitude:n}):(0,l.jsx)("span",{className:"text-sm text-stone-400 dark:text-stone-600",children:"No location"})]})}function c(e){let{latitude:t,longitude:n,onChange:c,disabled:u}=e;return(null==t||null==n)&&u?(0,l.jsx)(d,{latitude:t,longitude:n,disabled:!0}):(0,l.jsx)(r.Z,{button:(0,l.jsx)(d,{latitude:t,longitude:n}),children:()=>(0,l.jsxs)(s.Z,{className:"bg-stone-800 w-80",children:[(0,l.jsx)(o.Z,{value:{latitude:t,longitude:n},onChange:c,disabled:u}),!u&&(0,l.jsxs)(a.Z,{mode:"text",variant:"danger",onClick:()=>null==c?void 0:c({latitude:null,longitude:null}),children:[(0,l.jsx)(i.Tw,{className:"inline-block mr-1 w-5 h-5"}),"Clear"]})]})})}},50261:function(e,t,n){n.d(t,{Z:function(){return c}});var l=n(57437),a=n(2265),s=n(45987),i=n(16693),o=n(78471),r=n(60204),d=n(97197);function c(e){let{recording:t,label:n="Tags",onAddTag:c,onTagClick:u,onRemoveTag:x,disabled:m=!1}=e,f=(0,d.Z)(e=>e.getTagColor),{data:{tags:h}={},addTag:{mutate:j},removeTag:{mutate:v}}=(0,r.Z)({uuid:t.uuid,recording:t,onAddTag:c,onRemoveTag:x}),{handleAddTag:p,handleRemoveTag:g}=(0,a.useMemo)(()=>m?{}:{handleAddTag:j,handleRemoveTag:v},[j,m,v]);return(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,l.jsxs)("div",{className:"inline-flex",children:[(0,l.jsx)(s.lO,{className:"inline-block mr-1 w-5 h-5 text-stone-400 dark:text-stone-600"}),(0,l.jsx)("span",{className:"text-sm text-stone-500 font-medium",children:n})]}),(0,l.jsxs)("div",{className:"flex flex-row flex-wrap gap-2",children:[null==h?void 0:h.map(e=>(0,l.jsx)(o.ZP,{tag:e,...f(e),onClick:()=>null==u?void 0:u(e),onClose:()=>null==g?void 0:g(e)},"".concat(e.key,"-").concat(e.value))),(null==h?void 0:h.length)===0&&(0,l.jsx)("span",{className:"text-stone-400 dark:text-stone-600 text-sm",children:"No tags"}),!m&&(0,l.jsx)(i.Z,{variant:"primary",onAdd:p})]})]})}},41819:function(e,t,n){n.d(t,{Z:function(){return h}});var l=n(57437),a=n(38110),s=n(2265),i=n(61865),o=n(74578),r=n(68447),d=n(30143),c=n(45987),u=n(90262),x=n(76916),m=n(82456);function f(e){let{time:t,disabled:n}=e;return(0,l.jsxs)(r.Z,{mode:"text",variant:"secondary",padding:"py-1",disabled:n,children:[(0,l.jsx)(c.wZ,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),null!=t?t:(0,l.jsx)("span",{className:"text-sm text-stone-400 dark:text-stone-600",children:"-"})]})}function h(e){let{time:t,onChange:n,disabled:h=!1}=e,{register:j,handleSubmit:v,watch:p,formState:{errors:g}}=(0,i.cI)({disabled:h,mode:"onBlur",values:{time:t},resolver:(0,a.F)(o.z.object({time:o.z.string().regex(/^\d{2}:\d{2}(:\d{2}(\.\d+)?)?$/,{message:"Time must be in hh:mm:ss.ddd format"}).nullable().optional()}))}),b=(0,s.useCallback)(e=>{null==n||n({time:""===e.time?null:e.time})},[n]);return((0,m.Z)({onSubmit:b,watch:p,handleSubmit:v}),h)?(0,l.jsx)(f,{time:t,disabled:!0}):(0,l.jsx)(x.Z,{button:(0,l.jsx)(f,{time:t}),children:()=>{var e;return(0,l.jsxs)(d.Z,{className:"bg-stone-800",children:[(0,l.jsx)(u.BZ,{name:"time",label:"Time",error:null===(e=g.time)||void 0===e?void 0:e.message,children:(0,l.jsx)(u.II,{type:"text",...j("time"),pattern:"^([0-9]{2}:)?[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?$"})}),(0,l.jsxs)(r.Z,{mode:"text",variant:"danger",onClick:()=>null==n?void 0:n({time:null}),children:[(0,l.jsx)(c.Tw,{className:"inline-block mr-1 w-5 h-5"}),"Clear"]})]})}})}},16693:function(e,t,n){n.d(t,{Z:function(){return c}});var l=n(57437),a=n(73999),s=n(3870),i=n(68447),o=n(45987),r=n(98023);function d(e){let{onClose:t,onAdd:n,filter:a,...s}=e;return(0,l.jsx)(r.Z,{onSelect:e=>{null==n||n(e)},onCreate:e=>{null==n||n(e)},autoFocus:!0,onKeyDown:e=>{"Escape"===e.key?null==t||t():"Enter"===e.key&&(null==t||t())},initialFilter:a,...s})}function c(e){let{onAdd:t,text:n="add",variant:r="secondary",filter:c,...u}=e;return(0,l.jsx)(a.J,{as:"div",className:"inline-block text-left",children:(0,l.jsxs)(s.bv,{zIndex:20,placement:"bottom",offset:4,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,children:[(0,l.jsx)(a.J.Button,{as:"div",children:(0,l.jsxs)(i.Z,{mode:"text",variant:r,padding:"py-1",children:[(0,l.jsx)(o.dt,{className:"inline-block w-5 h-5 align-middle"}),n]})}),(0,l.jsx)(a.J.Panel,{className:"w-72",focus:!0,unmount:!0,children:e=>{let{close:n}=e;return(0,l.jsx)(d,{onClose:n,onAdd:t,filter:c,...u})}})]})})}},60204:function(e,t,n){n.d(t,{Z:function(){return i}});var l=n(2265),a=n(81698),s=n(41095);function i(e){let{uuid:t,recording:n,enabled:i=!0,onUpdate:o,onDelete:r,onAddTag:d,onAddNote:c,onRemoveTag:u,onAddFeature:x,onRemoveFeature:m,onUpdateFeature:f,onError:h}=e;if(void 0!==n&&n.uuid!==t)throw Error("Recording uuid does not match");let{query:j,useMutation:v,setData:p}=(0,s.ZP)({uuid:t,initial:n,name:"dataset",enabled:i,getFn:a.Z.recordings.get,onError:h}),g=v({mutationFn:a.Z.recordings.update,onSuccess:o}),b=v({mutationFn:a.Z.recordings.addTag,onSuccess:d}),N=v({mutationFn:a.Z.recordings.removeTag,onSuccess:u}),Z=v({mutationFn:a.Z.recordings.addNote,onSuccess:c}),w=v({mutationFn:a.Z.recordings.addFeature,onSuccess:x}),k=v({mutationFn:a.Z.recordings.removeFeature,onSuccess:m}),y=v({mutationFn:a.Z.recordings.updateFeature,onSuccess:f}),C=v({mutationFn:a.Z.recordings.delete,onSuccess:r}),F=(0,l.useMemo)(()=>null==j.data?null:a.Z.audio.getDownloadUrl({recording:j.data}),[j.data]);return{...j,update:g,addTag:b,removeTag:N,addNote:Z,addFeature:w,removeFeature:k,updateFeature:y,delete:C,set:p,downloadURL:F}}}}]);